!function(t){var e,i=null,a={updatedStrings:[],newStrings:[]},n=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|Windows Phone/i),o={preload_texts:"auto",project:document.domain,before_dom_insert:function(t){return t},before_commit:null,edit_strings_context:null,touch_optimized:"ontouchstart"in document.documentElement,escape:null,domain:null},s=function(t,e){full_key="jipt_"+t+"_"+p(),window.localStorage?localStorage.setItem(full_key,e):function(t,e,i){void 0===i&&(i=new Date((new Date).getTime()+31536e6).toGMTString());document.cookie=t+"="+escape(e)+"; path=/; expires="+i}(full_key,e)},r=function(t){var e=null,i="jipt_"+t+"_"+p();return e=window.localStorage?"undefined"===(e=localStorage.getItem(i)?localStorage.getItem(i):null)?void 0:e:function(t){for(var e=document.cookie.split(";"),i="",a="",n=!1,o=0;o<e.length;o++){if((i=e[o].split("="))[0].replace(/^\s+|\s+$/g,"")===t)return n=!0,i.length>1&&(a=unescape(i[1].replace(/^\s+|\s+$/g,""))),a;i=null,""}if(!n)return null}(i)},l=function(t){var e,i="jipt_"+t+"_"+p();window.localStorage?localStorage.removeItem(i):(e=i,document.cookie=e+"=; path=/; expires = Thu, 01 Jan 1970 00:00:00 GMT")},d={join:"join",login:"login",enterpriseLogin:"u/signin",entryPoint:"",apiEntryPoint:"",jiptCDN:"https://cdn.crowdin.com/jipt",authDomain:"https://accounts.crowdin.com",crowdinDomain:"crowdin.com",getEntryPoint:function(){if(0===this.entryPoint.length){var t=null!=o.domain?o.domain+".":"";this.entryPoint="https://"+t+this.crowdinDomain}return this.entryPoint},getAuthEntryPoint:function(t,i){i=i||{},null!==o.domain&&(i.domain=o.domain);var a=e.param(i);return this.authDomain+t+(a?"?"+a:"")},getFullUrl:function(t){return this.getEntryPoint()+t},getJiptPath:function(t){var e;return e=t==this.join||t==this.login?o.domain?this.enterpriseLogin:t:this.login,this.getAuthEntryPoint("/login",{continue:"/"+e+"?redirect_hash="+_.user.redirectHash})}},p=function(){return o.project},c=function(t,e,i){var a,n=!1;"js"===e?((a=document.createElement("script")).setAttribute("type","text/javascript"),a.setAttribute("src",t)):"css"===e&&((a=document.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",t)),void 0!==a&&(a.onload=a.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,i&&i(),a.onload=a.onreadystatechange=null)},document.getElementsByTagName("head")[0].appendChild(a))},u=function(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},_={callbacks:{},phrases:{},_phrases:{need_load:{},was_loaded:{},callbacks:[],strings_callbacks:{},load_timeout:null},projectLink:null,projectId:null,projectName:null,projectURL:null,editor:{currentTranslation:null},target_languages:[],workflowSteps:[],language:{code:null,id:0,name:""},workflowStep:{id:0,type:""},source_language:{code:null},user:{isLoggedIn:!0,isLeader:!0,isManager:!1,name:"",login:"",picture:"",redirectHash:""},regexp:{placeholders:{},startPhrase:/{crwdns(\d+):(\d)}/i,globalStartPhrase:/{crwdns(\d+):\d}/gi,globalPhrase:/{crwdns(\d+):(\d)}([\s\S]*?){crwdne\1:\2}/gi,exactPhrase:/^{crwdns(\d+):(\d)}([\s\S]*?){crwdne\1:\2}$/i,delimiterPart:function(t,e){return"{crwdnd"+t+":"+e+"}"},endPart:function(t,e){return"{crwdne"+t+":"+e+"}"},wrapText:function(t){return"{crwdns0:0}"+t+"{crwdne0:0}"}},regexp_new:{startPhrase:/crwdns(\d+):(\d)/i,globalStartPhrase:/crwdns(\d+):\d/gi,globalPhrase:/crwdns(\d+):(\d)([\s\S]*?)crwdne\1:\2/gi,exactPhrase:/^crwdns(\d+):(\d)([\s\S]*?)crwdne\1:\2$/i,delimiterPart:function(t,e){return"crwdnd"+t+":"+e},endPart:function(t,e){return"crwdne"+t+":"+e},wrapText:function(t){return"crwdns0:0"+t+"crwdne0:0"}},status:{untranslated:"untranslated",partially_translated:"partially_translated",translated:"translated",partially_approved:"partially_approved",approved:"approved",hidden:"hidden",not_found:"not_found",not_visible_on_step:"not_visible_on_step",file_not_available_for_language:"file_not_available_for_language"},pluralsPreview:!1,translatable_placeholders:[],translation_preview:{id:!1,value:"",plural_id:-1},alertFunction:null,confirmFunction:null,promptFunction:null,loginDialog:null,editorDialog:null,editorAccessStorageDialog:null,translationDialog:null,dialog_zindex:2047483647,minimized_translation_panel:!0,translations_preview:null,translations_highlight:null,translations_filter:null,touch_optimized:null,panel_search_phrase:null,rebuild_panel_timeout:null,panel_page:0,panel_pages:1,open_hotkeys_settings:!1,open_editor_settings:!1,editor_loaded:!1,editorDialogIframe:null,editorAccessStorageDialogIframe:null,not_found_warning:"[Unrecognized text]",loginDialogContent:function(){var t="";return o.domain||(t='<div class="jipt-register-block jipt-help-block">Don\'t have an account? <a target="_blank" href="javascript:void(0)" id="crowdin-join">Sign Up</a></div>'),'<div class="crowdin-login-panel" style="display: none;"><div id="Jipt_Language"><div class="language-group"><label for="crowdin-login-language-field">Target Language</label><div><select class="no-margin input-block-level" id="crowdin-login-language-field"></select></div></div></div><div id="Jipt_Workflow_Step"><div class="workflow-step-group hide"><label class="jipt-s-margin-right" for="crowdin-login-workflow-step-field">Workflow Step:</label><div><select class="no-margin input-block-level" id="crowdin-login-workflow-step-field"></select></div></div></div><div class="jipt-clearfix jipt-login-button-wrapper" style="margin-top: 24px;"><h4 class="no-margin-top">Log in with your Crowdin account</h4><div id="regular_login"><button type="submit" class="jipt-btn btn-block btn-primary" id="crowdin-jipt-login">Log In</button>'+t+'</div></div></div><div class="crowdin-languages-panel" style="display: none;"><div><label for="crowdin-language-field">Target Language</label><div><select class="input-block-level" id="crowdin-language-field"></select></div></div><div class="workflow-step-group hide"><label for="crowdin-workflow-step-field">Workflow Step</label><div><select class="input-block-level" id="crowdin-workflow-step-field"></select></div></div><div><button type="button" class="jipt-btn" id="crowdin-select-language-and-step" style="margin-top: 10px;">Select</button></div></div>'},translationDialogButtons:function(){return'<div class="jipt-dialog-buttons-wrapper"><ul id="translation_panel_tabs" class="jipt-tabs"><li><a id="show_translations" class="jipt-btn active jipt-btn-icon" href="#jipt-translations"><i class="jipt-icon-home"></i></a></li><li><a id="jipt-screenshot" href="#jipt-screenshot" class="jipt-btn jipt-btn-icon"><i class="jipt-icon-add-screenshot"></i></a></li><li><a id="show_options" href="#jipt-options" class="jipt-btn jipt-btn-icon"><i class="jipt-icon-options"></i></a></li></ul><div id="translation_panel_paging_wrapper"><form id="translation_panel_paging" class="jipt-paging" style="display: none;"><input type="text" class="pull-left" id="translation_panel_current_page" size="5"><div><a href="#" class="jipt-panel-page jipt-btn jipt-btn-icon" id="translation_panel_prev_page"><i class="jipt-icon-prev"></i></a><a href="#" class="jipt-panel-page jipt-btn jipt-btn-icon" id="translation_panel_next_page"><i class="jipt-icon-next"></i></a></div></form></div></div>'},translationDialogContent:function(){var t=!0===_.translations_preview?" checked":"",e=!0===_.translations_highlight?" checked":"",i=!0===_.translations_filter?" checked":"",a=!0===_.touch_optimized?" checked":"",s=_.user.login,r=_.user.name,l=_.user.picture,p=l?'src="'+l+'"':"",c=d.getEntryPoint()+(o.domain?"/u/":"/profile/"+s),u='<div class="jipt-control-group"><label class="jipt-checkbox"><input type="checkbox" id="jipt-translations-preview"'+t+">Preview translations</label></div>",g='<div class="jipt-control-group"><label class="jipt-checkbox"><input type="checkbox" id="jipt-translations-highlight"'+e+">Highlight</label></div>",h=o.preload_texts?'<div class="jipt-control-group"><label class="jipt-checkbox"><input type="checkbox" id="jipt-translations-filter"'+i+'>List only texts from the current page</label><div class="jipt-help-block">Home screen will show only strings used on this page.</div></div>':"",f=(a=o.touch_optimized?'<div class="jipt-control-group"><label class="jipt-checkbox"><input type="checkbox" id="jipt-touch-optimized"'+a+">Touch optimized mode</label></div>":"",n?"":'<div class="jipt-control-group jipt-settings-toggle"><a href="javascript:void(0);" id="jipt-hotkeys-settings">Keyboard Shortcuts</a></div>'),m="";return _.workflowSteps.length&&(m='<div class="jipt-control-group workflow-step-group"><label for="jipt-workflow-step">Workflow Step: </label><div><select class="input-block-level" id="jipt-workflow-step"></select></div></div>'),'<div class="crowdin-translation-panel-container"><div id="translation_panel_tabs_content" class="jipt-tabs-content"><div class="jipt-tab-pane" id="jipt-translations"><div class="jipt-input-wrapper"><div class="jipt-clear-btn-wrapper"><span class="jipt-icon-search"></span><input type="text" class="jipt-search-phrase input-block-level" placeholder="Type to search string" /><a class="jipt-clear-btn" href="#" style="display: none;"></a></div></div><div class="jipt-phrases-container no-focus"><ul class="jipt-phrases-to-translate"><li class="jipt-loading-msg">Loading...</li></ul></div></div><div class="jipt-tab-pane" id="jipt-options" style="display: none"><div class="jipt-options-wrapper"><div class="jipt-control-group"><label for="jipt-target-languages">Language</label><div><select class="input-block-level" id="jipt-target-languages"></select></div></div>'+m+'<div><button type="button" class="jipt-btn" id="jipt-change-language-and-step">Change</button></div><hr class="jipt-hr">'+u+g+h+a+'<hr class="jipt-hr jipt-settings-toggle"><div class="jipt-control-group jipt-clearfix jipt-settings-toggle"><a class="pull-left jipt_user" target="_blank" href="'+c+'"><img alt="" '+p+' class="jipt_user_picture"></a><div style="margin-left: 54px"><div class="jipt_user_name"><a target="_blank" href="'+c+'">'+r+'</a></div><button type="button" id="jipt-logout" class="jipt-btn">Log Out</button></div></div><hr class="jipt-hr jipt-settings-toggle"><div class="jipt-control-group jipt-settings-toggle"><a target="_blank" href="'+_.projectURL+'">View in Crowdin</a></div><div class="jipt-control-group jipt-settings-toggle"><a href="javascript:void(0);" id="jipt-editor-settings">Editor Settings</a></div>'+f+'</div></div><div class="jipt-tab-pane" id="jipt-screenshot" style="display: none"><div class="jipt-options-wrapper"><div>Take a screenshot of the current screen and upload it to Crowdin. All strings will be tagged automatically.</div>'+(_.user.isManager?"":'<div class="screenshot-status alert-warning">This feature is available only to Crowdin project managers.</div>')+'<div class="screenshot-button-section" style="margin-top: 20px"><div><button type="button" id="make_screenshot" class="jipt-btn '+(_.user.isManager?"":"disabled")+'">Take screenshot</button></div></div><div class="screenshot-status" id="screenshot-status"></div></div></div></div></div>'},init:function(){var t,i,a,n,s;document.documentElement.style.opacity="0",(t=document.createElement("div")).setAttribute("id","crowdin-jipt-mask"),t.setAttribute("style","position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 2037483647;text-align: center;background-color: #fff;"),(i=document.createElement("div")).classList.add("jipt-loader-wrapper"),(a=document.createElement("div")).classList.add("jipt-loader"),a.innerHTML='<svg class="jipt-loader-logo" id="ea69YclA0j21" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-12 -12 96 96" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" width="96" height="96" style="background-color:transparent"><style><![CDATA[#ea69YclA0j22_tr { animation: ea69YclA0j22_tr__tr 3000ms linear infinite normal forwards;}@keyframes ea69YclA0j22_tr__tr {0% {transform: translate(36px, 36px) rotate(0deg);}16.666667% {transform: translate(36px, 36px) rotate(0deg);}33.333333% {transform: translate(36px, 36px) rotate(90deg);animation-timing-function: cubic-bezier(0, 0, 0.58, 1);}50% {transform: translate(36px, 36px) rotate(90deg);animation-timing-function: cubic-bezier(0, 0, 0.58, 1);}66.666667% {transform: translate(36px, 36px) rotate(180deg);}100% {transform: translate(36px, 36px) rotate(180deg);}}#ea69YclA0j23_tr {animation: ea69YclA0j23_tr__tr 3000ms linear infinite normal forwards;}@keyframes ea69YclA0j23_tr__tr {0% {transform: translate(36px, 36px) rotate(0deg);}16.666667% {transform: translate(36px, 36px) rotate(90deg); animation-timing-function: cubic-bezier(0, 0, 0.58, 1);}33.333333% {transform: translate(36px, 36px) rotate(90deg); animation-timing-function: cubic-bezier(0, 0, 0.58, 1);}50% {transform: translate(36px, 36px) rotate(180deg);}100% {transform: translate(36px, 36px) rotate(180deg);}}]]></style><g id="ea69YclA0j22_tr" transform="translate(36,36) rotate(0)"><path d="M49.7297,72h-27.4594C8.02429,72,0,63.8244,0,49.7297v-27.4594C0,8.17563,8.02429,0,22.2703,0h27.4594C64.275,0,72,7.87631,72,22.2703v27.4594C72,64.1237,64.275,72,49.7297,72Z" transform="translate(-36,-36)" fill="#1e88e5"/></g><g id="ea69YclA0j23_tr" transform="translate(36,36) rotate(0)"><path d="M49.7297,72h-27.4594C8.02429,72,0,63.8244,0,49.7297v-27.4594C0,8.17563,8.02429,0,22.2703,0h27.4594C64.275,0,72,7.87631,72,22.2703v27.4594C72,64.1237,64.275,72,49.7297,72Z" transform="translate(-36,-36)" fill="#43a047"/></g><path d="M49.7297,72h-27.4594C8.02429,72,0,63.8244,0,49.7297v-27.4594C0,8.17563,8.02429,0,22.2703,0h27.4594C64.275,0,72,7.87631,72,22.2703v27.4594C72,64.1237,64.275,72,49.7297,72Z" fill="#263238"/><path d="M46.2564,49.0537c-1.3472,0-2.5476-.4181-3.5412-1.2371-1.1871-.9641-2.1307-2.4016-2.1641-4.0914-.0166-.8536.8803-.8536.8803-.8536s1.4572-.0172,2.1641-.0172c.7069.0172.9136,1.0366.947,1.2924.2734,2.291,1.5238,3.2897,2.4841,3.7458.5769.273.4335,1.1266-.7702,1.1646v-.0035Z" fill="#fff"/><path d="M34.1594,37.4118c-1.1871-.1451-2.9477-.2695-4.0847-.5598-1.844-.4699-1.7939-2.1874-1.7139-2.7472.2234-1.6794.8169-3.2344,1.7306-4.6789c1.137-1.7692,2.7709-3.3242,4.8716-4.589c3.9413-2.3671,9.4531-3.6871,15.5085-3.6871c4.4381,0,9.0696.5978,9.1163.5978.4168.0553.7203.47.7036.9399s-.3368.8294-.7536.8674c-.6736-.0173-1.3305-.0173-1.954-.0173-6.1687,0-10.5602.8674-13.8279,2.7472-3.2211,1.8418-5.4651,4.6616-6.9857,8.836-.16.3628-.6902,2.5122-2.6108,2.2945v-.0035Z" fill="#fff"/><path d="M39.5413,54.6382c-3.061.0657-5.9453-1.3684-8.1293-3.8703-1.8506-2.1182-2.9643-4.2538-3.1711-6.9941-.1267-1.79.6369-2.4085,1.6739-2.3014.7169.0725,2.9477.1831,4.2248.4561.9569.2004,1.5938.7499,1.7539,1.8799.8436,6.0265,4.5115,8.3971,6.6955,8.9085.3835.0899.6202.3456.6069.8052-.0167.4388-.2601,1.0401-3.6512,1.1127l-.0034.0034Z" fill="#fff"/><path d="M30.8214,59.9874c-2.1707.0933-4.2947-.3593-4.9016-.4699-2.5542-.47-4.6949-1.282-6.5288-2.4881-4.3915-2.8819-7.0424-7.972-7.3591-13.9986-.0801-1.4306-.2568-4.164,3.0343-3.9567c1.3571.0761,3.5112.7534,5.0283,1.206c1.884.546,2.7943,2.0527,2.7943,3.542c0,8.4974,7.4258,14.1127,10.6669,14.1127.7735,0,.9569.4769.8636.933-.0734.3629-.2701.978-3.5945,1.1231l-.0034-.0035Z" fill="#fff"/><path d="M19.4942,35.0168c-1.2837-.2384-2.5375-.7878-3.7579-1.1023-3.7746-.971-3.131-4.9173-2.7776-5.9989c3.4345-10.4774,14.3381-13.9814,23.1377-14.9178c8.2861-.8812,16.9556-.2005,25.0316,2.1286.5769.159,2.1674.5564,1.824,1.5239s-1.3005.2938-10.1101.0933c-2.9043-.0656-5.8052.1244-8.7162.5875-4.995.7879-10.13,2.4224-14.258,5.871-1.9907,1.6691-3.7413,3.7978-4.9117,6.3134-.3067.66-.5468,1.3201-.7536,1.9801-.21.698-.997,4.202-4.7049,3.5247l-.0033-.0035Z" fill="#fff"/><path d="M40.618,37.0388c.7069-3.2793,3.848-8.4766,13.5712-8.1172c2.2307.0726,1.2104,1.6483.11,1.6138-5.4985-.197-8.106,3.4763-9.4731,7.2015-.4402,1.1991-1.4438,1.3788-2.7009,1.1645-.8803-.1624-1.8373-.2695-1.5072-1.8626Z" fill="#fff"/></svg>',s=window.setInterval((function(){void 0!==(n=document.getElementsByTagName("body")[0])&&(window.clearInterval(s),n.appendChild(t),t.appendChild(i),i.appendChild(a),document.documentElement.style.opacity="")}),100),function(){for(var t=_jipt||[],e=0;e<t.length;e++)o[t[e][0]]=t[e][1]}(),c(d.jiptCDN+"/jipt.css?v3","css"),c(d.jiptCDN+"/lib/h2c.min.js","js"),c(d.jiptCDN+"/lib/ResizeSensor.js","js"),c(d.jiptCDN+"/lib/jquery.min.js","js",(function(){e=jQuery.noConflict(!0),_.init_plugins(),_.init_editor_listener(),e(document).ready((function(){_.init_access_storage_dialog()}))}))},init_plugins:function(){_.init_jipt_dialog(),_.init_mouse_touch_events(),_.init_drags(),_.init_center_position()},init_icu:function(){c(d.jiptCDN+"/../js/lib/moment.min.js","js"),c(d.jiptCDN+"/../js/lib/icu/Intl.complete.min.js","js"),c(d.jiptCDN+"/../js/lib/icu/messageformatLight.js","js")},init_jipt_dialog:function(){e.fn.jiptDialog=function(t){t=e.extend({modal:!1,position:"",save_position:!1,drags:!0,resize:!1,fixed:!0,title_pane:"",minimize_btn:!0,close_btn:!0,minimized:!1,icon:"",buttons_pane:"",width:"auto",height:"auto",save_height:!1,custom_class:"",close_callback:"",iframe:!1,action:"init"},t);var i=e(this),a={},n={};if("init"===t.action||(a=i.parent()).hasClass("jipt-dialog"))switch(t.action){case"init":return function(){if(i.hasClass("jipt-dialog-content"))return void console.warn("Crowdin In-Context dialog: seems that dialog is already initialized.");if(a=e('<div data-html2canvas-ignore="true" class="jipt-dialog crowdin-jipt '+t.custom_class+'" style="display:none">'),i.addClass("jipt-dialog-content"),a.appendTo("body"),t.iframe){var o=i.html(),s=e('<iframe class="crowdin-jipt" frameBorder="0"/>');s.css({width:"100%",display:"block",overflow:"hidden",height:t.height}),i.empty().append(s).css("padding",0),a.html(i);var u=s.contents()[0];u.open(),u.write('<!doctype html><html><head><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet"><link rel="stylesheet" type="text/css" href="'+d.jiptCDN+'/jipt.css"/></head><body style="margin: 0" id ="'+i.get(0).id+'" class="jipt-dialog-content crowdin-jipt '+t.custom_class+'">'+o+"</body></html>"),u.close(),(n=s.contents()).mousedown((function(t){0===e(t.target).closest(".no-focus").length&&c()}))}else a.html(i),n=i;var _=i.attr("id"),g=t.icon?" jipt-dialog-icon-"+t.icon:"",h=t.close_btn?'<a href="#" data-id="#'+_+'" class="jipt-close-btn jipt-dialog-close"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a>':"",f=t.minimize_btn?'<a href="#" data-id="#'+_+'" class="jipt-minimize-btn jipt-dialog-minimize"><span class="jipt-icon-minimize"></span></a>':"",m="",v="",w="";t.title_pane&&(m='<div class="jipt-dialog-title jipt-dialog-drags jipt-clearfix'+g+'">'+t.title_pane+"</div>");(h||f)&&(v='<div class="jipt-dialog-title-buttons jipt-clearfix">'+h+f+"</div>");i.before(v+m),t.buttons_pane&&(w='<div class="jipt-dialog-buttons jipt-dialog-drags jipt-clearfix">'+t.buttons_pane+"</div>",i.after(w));a.css("position",!0===t.fixed?"fixed":"absolute"),a.width("auto"===t.width?a.width():t.width),i.height(t.height),i.append('<div class="jipt-dialog-content-mask" style="display: none; height:'+i.height()+'px;"><div>'),t.save_height&&!t.iframe&&a.data("save_height",!0);t.modal&&(a.data("modal",!0),e("#jipt-modal-mask").length||e(e("<div>").attr("id","jipt-modal-mask").css("display","none")).appendTo("body"));if(t.drags&&t.title_pane){var b=!0===t.fixed?"fixed":"absolute";a.udraggable({position:b,handle:".jipt-dialog-drags"})}t.resize&&(a.addClass("jipt-dialog-resize"),i.before('<div class="jipt-dialog-mask mask-hidden"></div>'));t.minimized&&"no"!==r(i.attr("id")+"_min")&&a.addClass("jipt-dialog-minimized");a.find(".jipt-dialog-close").click((function(){return i.jiptDialog({action:"close"}),!1})),a.find(".jipt-dialog-minimize").click((function(){return i.jiptDialog({action:"toggle_minimized"}),!1})),a.find(".jipt-dialog-title").on("utap",(function(){a.hasClass("jipt-dialog-minimized")&&i.jiptDialog({action:"toggle_minimized_show"})})),a.find(".jipt-dialog-title #translation_panel_tabs_minimized .jipt-btn").on("click",(function(t){a.hasClass("jipt-dialog-minimized")&&(i.jiptDialog({action:"toggle_minimized"}),e(t.target).trigger("click"))})),a.on("jipt_dialog_close",(function(){t.close_callback&&t.close_callback()})),t.save_position?function(){"yes"===r(i.attr("id")+"_min")&&a.addClass("jipt-dialog-minimized");if(r(i.attr("id"))){var t=JSON.parse(r(i.attr("id"))),n=e(window).width()-a.outerWidth(),o=e(window).height()-a.outerHeight();t.left<0?t.left=0:t.left>n&&(t.left=n),t.top<0?t.top=0:t.top>o&&(t.top=o),a.css(t),p()}else l(),p()}():l()}(),n;case"open":!function(){a.data("modal")&&(e("#jipt-modal-mask").css("z-index",_.dialog_zindex+=1).show(),e("html").addClass("jipt-no-scroll"));""===t.position||a.is(":visible")||l();c(),a.css("visibility","visible"),a.css("display","block"),a.data("save_height")&&i.height(i.height()).css("overflow","auto")}();break;case"close":!function(){a.data("modal")&&(e("html").removeClass("jipt-no-scroll"),e("#jipt-modal-mask").hide());a.css("display","none"),a.trigger("jipt_dialog_close")}();break;case"destroy":!function(){a.data("modal")&&e("#jipt-modal-mask").hide();a.remove()}();break;case"toggle_minimized":o();break;case"toggle_minimized_show":o(!0);break;case"center":a.center();break;case"is_visible":return a.is(":visible");case"move_to_front":c();break;default:return void console.warn("Crowdin JIPT dialog: unknown action :(")}else console.warn("Crowdin In-Context dialog: seems that dialog is not initialized.");function o(t){var n;if(a.hasClass("jipt-dialog-minimized"))a.removeClass("jipt-dialog-minimized"),r(i.attr("id")+"_normal")?(n=JSON.parse(r(i.attr("id")+"_normal")),a.css(n)):a.css("top",e(window).height()-a.outerHeight()-10+"px");else if(!t){n={top:a.offset().top-e(window).scrollTop(),left:a.offset().left-e(window).scrollLeft()},s(i.attr("id")+"_normal",JSON.stringify(n)),a.addClass("jipt-dialog-minimized")}}function l(){var i,n;switch(t.position){case"center":!1===t.fixed?a.center(window,!0):a.center();break;case"bottom-left":i=e(window).height()-a.outerHeight()-10+e(window).scrollTop(),a.css({top:(i<0?0:i)+"px",left:"10px"});break;case"bottom-right":i=e(window).height()-a.outerHeight()-10+e(window).scrollTop(),n=e(window).width()-a.outerWidth()-10+e(window).scrollLeft(),a.css({top:(i<0?0:i)+"px",left:(n>0?0:n)+"px"});break;default:!1===t.fixed?a.center(window,!0):a.center()}}function p(){e(window).unload((function(){if(a.is(":visible")){var t={top:a.offset().top-e(window).scrollTop(),left:a.offset().left-e(window).scrollLeft()};s(i.attr("id"),JSON.stringify(t)),a.hasClass("jipt-dialog-minimized")?s(i.attr("id")+"_min","yes"):s(i.attr("id")+"_min","no")}}))}function c(){var i,n,o="undefined"!=typeof __ResizeSensor&&new __ResizeSensor(a,(function(s){"move_to_front"===n&&(a.find(".jipt-dialog-mask").removeClass("mask-hidden"),clearTimeout(i),i=setTimeout((function(){e(document).on("mouseup",(function(){a.find(".jipt-dialog-mask").addClass("mask-hidden"),o.detach(a)}))}),100)),n=t.action}));a.css("z-index",_.dialog_zindex+=1).siblings(".jipt-dialog").removeClass("active-dialog").end().addClass("active-dialog")}},e(document).on("mousedown utapstart",(function(t){var i=e(t.target).closest(".jipt-dialog");i.length?i.find(".jipt-dialog-content").jiptDialog({action:"move_to_front"}):e(".jipt-dialog").removeClass("active-dialog")}))},init_mouse_touch_events:function(){var t,i,a,n,o,s,r,l,d,p,c,u,_,g,h,f,m,v=e.event.special,w={},b=!1,j=-1,x=!1,y={bound_ns_map:{},wheel_ratio:15,px_radius:1,ignore_class:":input",tap_time:200,held_tap_time:300},k=[];l=function(t){var e,i=0;for(e=this.length;e;0)this[--e]===t&&i++;return i},d=function(t){var e,i=0;for(e=this.length;e;0)this[--e]===t&&(this.splice(e,1),i++,e++);return i},p=function(t){return!l.call(this,t)&&(this.push(t),!0)},t=(c=function(t){if(t&&e.isArray(t)){if(t.remove_val)return console.warn("The array appears to already have listPlus capabilities"),t}else t=[];return t.remove_val=d,t.match_val=l,t.push_uniq=p,t})(),i={setup:function(i,a,n){var o,s,r,l,d,p=e(this),u={};if(!e.data(this,"ue_bound")){for(o={},e.extend(!0,o,y),e.data(this,"ue_bound",o),(d=c(a.slice(0))).length&&""!==d[0]||(d=["000"]),s=0;s<d.length;s++)(r=d[s])&&(u.hasOwnProperty(r)||(u[r]=!0,l=".__ue"+r,p.bind("mousedown"+l,f),p.bind("touchstart"+l,m),p.bind("mousewheel"+l,void 0)));t.push_uniq(this),b||(e(document).bind("mousemove.__ue",f),e(document).bind("touchmove.__ue",m),e(document).bind("mouseup.__ue",f),e(document).bind("touchend.__ue",m),e(document).bind("touchcancel.__ue",m),b=!0)}},add:function(t){var i,a,n,o,s=e.data(this,"ue_bound"),r=t.namespace,l=t.type;if(s&&((i=s.bound_ns_map)[l]||(i[l]={}),r))for(a=r.split("."),n=0;n<a.length;n++)o=a[n],i[l][o]=!0},remove:function(t){var i,a,n,o=e.data(this,"ue_bound").bound_ns_map,s=t.type,r=t.namespace;if(o[s])if(r){for(i=r.split("."),a=0;a<i.length;a++)n=i[a],o[s][n]&&delete o[s][n];e.isEmptyObject(o[s])&&delete o[s]}else delete o[s]},teardown:function(i){var a,n,o,s,r=e(this),l=e.data(this,"ue_bound").bound_ns_map;if(e.isEmptyObject(l)){for((s=c(i)).push_uniq("000"),a=0;a<s.length;a++)(n=s[a])&&(o=".__ue"+n,r.unbind("mousedown"+o),r.unbind("touchstart"+o),r.unbind("mousewheel"+o));e.removeData(this,"ue_bound"),t.remove_val(this),0===t.length&&(e(document).unbind("mousemove.__ue"),e(document).unbind("touchmove.__ue"),e(document).unbind("mouseup.__ue"),e(document).unbind("touchend.__ue"),e(document).unbind("touchcancel.__ue"),b=!1)}}},u=function(t){var i,a=+new Date,o=t.motion_id,s=t.motion_map,r=t.bound_ns_map;delete s.idto_tapheld,s.do_allow_tap&&(s.px_end_x=s.px_start_x,s.px_end_y=s.px_start_y,s.ms_timestop=a,s.ms_elapsed=a-s.ms_timestart,r.uheld&&(i=e.Event("uheld"),e.extend(i,s),e(s.elem_bound).trigger(i)),r.uheldstart?(i=e.Event("uheldstart"),e.extend(i,s),e(s.elem_bound).trigger(i),n=o):delete w[o])},_=function(t){var i,a,n,l,d=t.motion_id,p=t.event_src,c=t.request_dzoom,_=e.data(t.elem,"ue_bound"),g=_.bound_ns_map,h=e(p.target),f=!1;if(!w[d]&&(!c||g.uzoomstart)&&!(h.is(_.ignore_class)||h.is("a")||h.parent().is("a"))){for(p.preventDefault(),n=!!(g.utap||g.uheld||g.uheldstart),a=k.pop();a;)h.is(a.selector_str)||e(t.elem).is(a.selector_str)?a.callback_match&&a.callback_match(t):a.callback_nomatch&&a.callback_nomatch(t),a=k.pop();if(i={do_allow_tap:n,elem_bound:t.elem,elem_target:p.target,ms_elapsed:0,ms_timestart:p.timeStamp,ms_timestop:void 0,option_map:_,orig_target:p.target,px_current_x:p.clientX,px_current_y:p.clientY,px_end_x:void 0,px_end_y:void 0,px_start_x:p.clientX,px_start_y:p.clientY,timeStamp:p.timeStamp},w[d]=i,l=e.Event("utapstart"),e.extend(l,i),e(i.elem_bound).trigger(l),g.uzoomstart&&(c?o=d:s?r||(r=d,l=e.Event("uzoomstart"),f=!0):s=d,f))return l=e.Event("uzoomstart"),i.px_delta_zoom=0,e.extend(l,i),void e(i.elem_bound).trigger(l);(g.uheld||g.uheldstart)&&(i.idto_tapheld=setTimeout((function(){u({motion_id:d,motion_map:i,bound_ns_map:g})}),_.held_tap_time))}},g=function(t){var i,l,d,p,c,u,_,g,h=t.motion_id,f=t.event_src,m=!1;if(w[h]){if(f.preventDefault(),d=(l=(i=w[h]).option_map).bound_ns_map,i.timeStamp=f.timeStamp,i.elem_target=f.target,i.ms_elapsed=f.timeStamp-i.ms_timestart,i.px_delta_x=f.clientX-i.px_current_x,i.px_delta_y=f.clientY-i.px_current_y,i.px_current_x=f.clientX,i.px_current_y=f.clientY,i.timeStamp=f.timeStamp,i.do_allow_tap&&(Math.abs(i.px_delta_x)>l.px_radius||Math.abs(i.pd_delta_y)>l.px_radius||i.ms_elapsed>l.tap_time)&&(i.do_allow_tap=!1),s&&r&&(h===s||h===r)?(w[h]=i,_=w[s],g=w[r],c=Math.floor(Math.sqrt(Math.pow(_.px_current_x-g.px_current_x,2)+Math.pow(_.px_current_y-g.px_current_y,2))+.5),u=-1===j?0:4*(c-j),j=c,m=!0):o===h&&d.uzoommove&&(u=1*i.px_delta_y,m=!0),m)return p=e.Event("uzoommove"),i.px_delta_zoom=u,e.extend(p,i),void e(i.elem_bound).trigger(p);n===h?d.uheldmove&&(p=e.Event("uheldmove"),e.extend(p,i),e(i.elem_bound).trigger(p)):a===h&&d.udragmove&&(p=e.Event("udragmove"),e.extend(p,i),e(i.elem_bound).trigger(p)),a||n||!d.udragstart||!1!==i.do_allow_tap||(a=h,p=e.Event("udragstart"),e.extend(p,i),e(i.elem_bound).trigger(p),i.idto_tapheld&&(clearTimeout(i.idto_tapheld),delete i.idto_tapheld))}},h=function(t){var i,l,d,p,c=t.motion_id,u=t.event_src,_=!1;x=!1,w[c]&&(d=(l=(i=w[c]).option_map).bound_ns_map,i.elem_target=u.target,i.ms_elapsed=u.timeStamp-i.ms_timestart,i.ms_timestop=u.timeStamp,i.px_current_x&&(i.px_delta_x=u.clientX-i.px_current_x,i.px_delta_y=u.clientY-i.px_current_y),i.px_current_x=u.clientX,i.px_current_y=u.clientY,i.px_end_x=u.clientX,i.px_end_y=u.clientY,i.timeStamp=u.timeStamp,p=e.Event("utapend"),e.extend(p,i),e(i.elem_bound).trigger(p),i.idto_tapheld&&(clearTimeout(i.idto_tapheld),delete i.idto_tapheld),d.utap&&i.ms_elapsed<=l.tap_time&&i.do_allow_tap&&(p=e.Event("utap"),e.extend(p,i),e(i.elem_bound).trigger(p)),c===a&&(d.udragend&&(p=e.Event("udragend"),e.extend(p,i),e(i.elem_bound).trigger(p)),a=void 0),c===n&&(d.uheldend&&(p=e.Event("uheldend"),e.extend(p,i),e(i.elem_bound).trigger(p)),n=void 0),c===o?(_=!0,o=void 0):c===s&&(r?(s=r,r=void 0,_=!0):s=void 0,j=-1),c===r&&(r=void 0,j=-1,_=!0),_&&d.uzoomend&&(p=e.Event("uzoomend"),i.px_delta_zoom=0,e.extend(p,i),e(i.elem_bound).trigger(p)),delete w[c])},m=function(t){var e,i,a,n,o=+new Date,s=t.originalEvent.changedTouches||[];switch(x=!0,t.timeStamp=o,t.type){case"touchstart":n=_;break;case"touchmove":n=g;break;case"touchend":case"touchcancel":n=h;break;default:n=null}if(n)for(e=0;e<s.length;e++)i=s[e],a="touch"+String(i.identifier),t.clientX=i.clientX,t.clientY=i.clientY,n({elem:this,motion_id:a,event_src:t})},f=function(t){var e,i="mouse"+String(t.button),a=!1;if(x)t.stopImmediatePropagation();else{if(t.shiftKey&&(a=!0),"mousemove"!==t.type&&0!==t.button)return!0;switch(t.type){case"mousedown":e=_;break;case"mouseup":e=h;break;case"mousemove":e=g;break;default:e=null}e&&e({elem:this,event_src:t,request_dzoom:a,motion_id:i})}},v.ue=v.utap=v.uheld=v.uzoomstart=v.uzoommove=v.uzoomend=v.udragstart=v.udragmove=v.udragend=v.uheldstart=v.uheldmove=v.uheldend=i,e.ueSetGlobalCb=function(t,e,i){k.push({selector_str:t||"",callback_match:e||null,callback_nomatch:i||null})}},init_drags:function(){"use strict";var t=Math.floor,i=Math.min,a=Math.max;window.requestAnimationFrame=window.requestAnimationFrame||function(t){return setTimeout(t,10)},window.cancelAnimationFrame=window.cancelAnimationFrame||function(t){return clearTimeout(t)};var n=function(t,i){var a=this;this.el=t,this.$el=e(t),this.options=e.extend({},e.fn.udraggable.defaults,i),this.positionElement=this.options.positionElement||this.positionElement,this.getStartPosition=this.options.getStartPosition||this.getStartPosition,this.updatePositionFrameHandler=function(){if(delete a.queuedUpdate,a.ui){var t=a.ui.position;a.positionElement(a.$el,a.started,t.left,t.top),a.options.dragUpdate&&a.options.dragUpdate.apply(a.el,[a.ui])}},this.queuePositionUpdate=function(){a.queuedUpdate||(a.queuedUpdate=window.requestAnimationFrame(a.updatePositionFrameHandler))},this.init()};n.prototype={constructor:n,init:function(){var t=this;this.disabled=!1,this.started=!1,this.normalisePosition();var i=this.options.handle?this.$el.find(this.options.handle):this.$el;i.on("utapstart.udraggable",(function(t){e(document.body).addClass("draggable")})).on("utapend.udraggable",(function(t){e(document.body).removeClass("draggable")})),this.options.longPress?i.on("uheldstart.udraggable",(function(e){t.start(e)})).on("uheldmove.udraggable",(function(e){t.move(e)})).on("uheldend.udraggable",(function(e){t.end(e)})):i.on("udragstart.udraggable",(function(e){t.start(e)})).on("udragmove.udraggable",(function(e){t.move(e)})).on("udragend.udraggable",(function(e){t.end(e)}))},destroy:function(){(this.options.handle?this.$el.find(this.options.handle):this.$el).off(".udraggable"),this.$el.removeData("udraggable")},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},option:function(){var t;if(0===arguments.length)return this.options;if(2!==arguments.length){if(1===arguments.length){if("string"==typeof arguments[0])return this.options[arguments[0]];if("object"==typeof arguments[0])for(t in arguments[0])arguments[0].hasOwnProperty(t)&&(this.options[t]=arguments[0][t])}this.options.containment&&this._initContainment()}else this.options[arguments[0]]=arguments[1]},normalisePosition:function(){var t=this.$el.position();this.$el.css({position:this.options.position,top:t.top,left:t.left,right:"auto",bottom:"auto"})},start:function(t){if(!this.disabled){var e=this.getStartPosition(this.$el);return this._initContainment(),this.ui={helper:this.$el,offset:{top:e.y,left:e.x},originalPosition:{top:e.y,left:e.x},position:{top:e.y,left:e.x}},this.options.longPress&&this._start(t),this._stopPropagation(t)}},move:function(t){if(!this.disabled&&(this.started||this._start(t))){var e=t.px_current_x-t.px_start_x,i=t.px_current_y-t.px_start_y,a=this.options.axis;a&&"x"===a&&(i=0),a&&"y"===a&&(e=0);var n={left:this.ui.originalPosition.left,top:this.ui.originalPosition.top};a&&"x"!==a||(n.left+=e),a&&"y"!==a||(n.top+=i),this._applyGrid(n),this._applyContainment(n);var o=this.ui.position;return n.top===o.top&&n.left===o.left||(this.ui.position.left=n.left,this.ui.position.top=n.top,this.ui.offset.left=n.left,this.ui.offset.top=n.top,this.options.drag&&this.options.drag.apply(this.el,[t,this.ui]),this.queuePositionUpdate()),this._stopPropagation(t)}},end:function(t){return(this.started||this._start(t))&&(this.$el.removeClass("udraggable-dragging"),this.started=!1,this.queuedUpdate&&window.cancelAnimationFrame(this.queuedUpdate),this.updatePositionFrameHandler(),this.options.stop&&this.options.stop.apply(this.el,[t,this.ui])),this._stopPropagation(t)},_stopPropagation:function(t){return t.stopPropagation(),t.preventDefault(),!1},_start:function(t){if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t))return this.started=!0,this.queuePositionUpdate(),this.options.start&&this.options.start.apply(this.el,[t,this.ui]),this.$el.addClass("udraggable-dragging"),!0},_mouseDistanceMet:function(t){return a(Math.abs(t.px_start_x-t.px_current_x),Math.abs(t.px_start_y-t.px_current_y))>=this.options.distance},_mouseDelayMet:function(t){return t.ms_elapsed>this.options.delay},_initContainment:function(){var t,i=this.options;i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.$el.offsetParent()),(t=e(i.containment))[0]&&(this.containment=[0,0,t.innerWidth()-this.$el.outerWidth(),t.innerHeight()-this.$el.outerHeight()])):this.containment=i.containment:this.containment=null},_applyGrid:function(e){if(this.options.grid){var i=this.options.grid[0],a=this.options.grid[1];e.left=t((e.left+i/2)/i)*i,e.top=t((e.top+a/2)/a)*a}},_applyContainment:function(t){var e=this.containment;e&&(t.left=i(a(t.left,e[0]),e[2]),t.top=i(a(t.top,e[1]),e[3]))},getStartPosition:function(t){return{x:parseInt(t.css("left"),10)||0,y:parseInt(t.css("top"),10)||0}},positionElement:function(t,e,i,a){t.css({left:i,top:a})}},e.fn.udraggable=function(t){var i=Array.prototype.slice.call(arguments,1),a=[];return this.each((function(){var o=e(this),s=o.data("udraggable");if(s||(s=new n(this,t),o.data("udraggable",s)),"string"==typeof t){if("function"!=typeof s[t])throw"jquery.udraggable has no '"+t+"' method";var r=s[t].apply(s,i);void 0!==r&&a.push(r)}})),a.length>0?a[0]:this},e.fn.udraggable.defaults={axis:null,delay:0,distance:0,longPress:!1,position:"fixed",drag:null,start:null,stop:function(){e(document.body).removeClass("draggable")}}},init_center_position:function(){e.fn.center=function(t,i){t=t?this.parent():window;var a=0,n=0;i&&(a=e(t).scrollTop(),n=e(t).scrollLeft());var o=(e(t).height()-this.outerHeight())/2+a,s=(e(t).width()-this.outerWidth())/2+n;return o=o<0?0:o,s=s<0?0:s,this.css({top:o+"px",left:s+"px"}),this}},place_close_btn:function(){"function"==typeof o.escape&&e('<a id="jipt-close-btn">').html("&times;").attr("href","#").appendTo("#jipt-modal-mask").click((function(t){t.preventDefault(),o.escape()}))},init_access_storage_dialog:function(){_.editorAccessStorageDialog=e('<div id="crowdin-access-storage-editor">'),_.editorAccessStorageDialog.jiptDialog({width:"380px",height:"175px",drags:!1,minimize_btn:!1,close_btn:!1,save_position:!1,modal:!1,icon:"crowdin",title_pane:"<h4>Allow Access to Storage Access API</h4>"}),_.editorAccessStorageDialog.append('<iframe frameBorder="0" id="crowdin-access-storage-editor-iframe"></iframe>'),_.editorAccessStorageDialogIframe=e("iframe#crowdin-access-storage-editor-iframe"),_.editorAccessStorageDialogIframe.css({width:"100%",display:"block",overflow:"hidden",height:"175px"}),_.editorAccessStorageDialogIframe.attr("src",d.getEntryPoint()+"/editor?jipt_access_storage=true&jipt="+document.location.origin)},init_login_panel:function(){_.loginDialog=e("<div>").attr("id","jipt-login-panel").html(_.loginDialogContent()),_.loginDialog.content=_.loginDialog.jiptDialog({modal:!0,width:"360px",height:"400px",drags:!0,minimize_btn:!1,close_btn:!1,iframe:!0,custom_class:"jipt-login-dialog",title_pane:'<div><div style="min-height: 24"><svg class="crowdin-jipt-logo" width="116" height="24"><image xlink:href="'+d.jiptCDN+'/images/crowdin-logo-small.svg" src="'+d.jiptCDN+'/images/crowdin-logo-small.png" width="116" height="24" alt="Crowdin &mdash Localization Management Platform" /></svg></div><h3 class="crowdin-jipt-login-header">Crowdin In-Context Translations</h3></div>'}),_.loginDialog.content.find("#crowdin-login-language-field").change((function(){_.loginDialog.content.find("#crowdin-login-workflow-step-field").html(_.getWorkflowStepsOptions(e(this).val()))})),_.loginDialog.content.find("#crowdin-language-field").change((function(){_.loginDialog.content.find("#crowdin-workflow-step-field").html(_.getWorkflowStepsOptions(e(this).val()))})),_.loginDialog.content.find("#crowdin-jipt-login").click((function(){return _._login_action(),!1})),_.loginDialog.content.find("#crowdin-join").click((function(){return _._join_action(),!1})),_.loginDialog.content.find("#crowdin-select-language-and-step").click((function(){var t=_.loginDialog.content.find("#crowdin-language-field option:selected");_.set_current_language(t.val(),t.data("id"),t.html());var e=_.loginDialog.content.find("#crowdin-workflow-step-field option:selected");return _.setCurrentWorkflowStep(e.val(),e.html()),_.loginDialog.jiptDialog({action:"close"}),_.init_project(),!1})),_.loginDialog.content.find(".crowdin-jipt-to-login").click((function(){_.show_login_panel()}))},init_highlight:function(){"no"!==r("highlight")?(_.translations_highlight=!0,e("body").addClass("jipt-highlight")):(_.translations_highlight=!1,e("body").removeClass("jipt-highlight"))},init_preview:function(){"no"!==r("preview")?_.translations_preview=!0:_.translations_preview=!1},init_filter:function(){o.preload_texts&&"yes"!==r("filter")?_.translations_filter=!1:_.translations_filter=!0},init_touch_optimized:function(){o.touch_optimized&&"no"!==r("touch_optimized")?(e("#crowdin-translation-badge").remove(),_.touch_optimized=!0):_.touch_optimized=!1},init_translation_panel:function(){var t,i,a=null;_.translationDialog=e("<div>").attr("id","crowdin-translation-panel").html(_.translationDialogContent()),_.translationDialog.content=_.translationDialog.jiptDialog({width:"400px",height:"400px",drags:!0,save_position:!0,save_height:!0,close_btn:!1,iframe:!0,position:"bottom-left",custom_class:"jipt-translations-dialog",icon:"crowdin",minimized:_.minimized_translation_panel,title_pane:(t=!0===_.translations_preview?"active":"",i=!0===_.translations_highlight?"active":"",'<h4 class="jipt-dialog-title-name">Crowdin In-Context</h4><div class="jipt-dialog-buttons-wrapper"><ul id="translation_panel_tabs_minimized" class="jipt-tabs jipt-tabs--main"><li><a id="show_translations_minimized" title="Source Strings" class="jipt-btn active jipt-btn-icon" href="#jipt-translations"><i class="jipt-icon-home"></i></a></li><li class="hide"><a id="jipt-screenshot_minimized" title="Take Screenshot" href="#jipt-screenshot" class="jipt-btn jipt-btn-icon"><i class="jipt-icon-add-screenshot"></i></a></li><li class="hide"><a id="show_options_minimized" href="#jipt-options" title="Settings" class="jipt-btn jipt-btn-icon"><i class="jipt-icon-options"></i></a></li></ul><ul class="jipt-shortuctuts jipt-tabs"><li><a id="jipt-shortctut-preview-toggle" href="javascript:void(0)" title="Toggle Preview Translations" class="jipt-btn jipt-btn-icon '+t+'"><i class="jipt-icon-preview"></i></a></li><li><a id="jipt-shortctut-highlight-toggle" href="javascript:void(0)" title="Toggle Highlight" class="jipt-btn jipt-btn-icon '+i+'"><i class="jipt-icon-highlight"></i></a></li></ul></div>'),buttons_pane:_.translationDialogButtons()}),_.translationDialog.jiptDialog({action:"open"});var n=_.translationDialog.content.find("#jipt-target-languages");n.html(_._get_target_languages_options()),_.translationDialog.content.find("#jipt-workflow-step").html(_.getWorkflowStepsOptions(e(n).val())),_.load_phrases(),_.translationDialog.content.find("#jipt-target-languages").change((function(){_.translationDialog.content.find("#jipt-workflow-step").html(_.getWorkflowStepsOptions(e(this).val()))})),_.translationDialog.content.find("#jipt-change-language-and-step").click((function(){var t=_.translationDialog.content.find("#jipt-target-languages").find("option:selected");_.set_current_language(t.val(),t.data("id"),t.html());var e=_.translationDialog.content.find("#jipt-workflow-step").find("option:selected");_.setCurrentWorkflowStep(e.val(),e.html()),window.location.reload()})),_.translationDialog.content.find("#jipt-logout").click((function(){return _._logout_action(),!1})),_.translationDialog.content.find("#jipt-translations-preview").change((function(){e(this).prop("checked")?s("preview","yes"):s("preview","no"),_.init_preview(),_.set_translations_preview(),e("#jipt-shortctut-preview-toggle")[_.translations_preview?"addClass":"removeClass"]("active")})),_.translationDialog.content.find("#jipt-translations-highlight").change((function(){e(this).prop("checked")?s("highlight","yes"):s("highlight","no"),_.init_highlight(),e("#jipt-shortctut-highlight-toggle")[_.translations_highlight?"addClass":"removeClass"]("active")})),_.translationDialog.content.find("#jipt-translations-filter").change((function(){e(this).prop("checked")?s("filter","yes"):s("filter","no"),_.init_filter(),_.rebuild_panel_phrases(_.panel_search_phrase)})),_.translationDialog.content.find("#jipt-touch-optimized").change((function(){e(this).prop("checked")?s("touch_optimized","yes"):s("touch_optimized","no"),_.init_touch_optimized(),_.set_translations_preview()})),_.translationDialog.content.on("click",".jipt-phrases-to-translate li:not(.disabled) a",(function(){return _.show_editor(_.phrases[this.rel].data),!1})),_.translationDialog.content.on("click","#jipt-hotkeys-settings",(function(){return _.show_settings("hotkeys"),!1})),_.translationDialog.content.on("click","#jipt-editor-settings",(function(){return _.show_settings("editor"),!1})),e("#translation_panel_tabs a").click((function(t){if(!e(this).hasClass("active")){e(this).closest("ul").find("a").removeClass("active"),e(this).addClass("active");var i=e(this).attr("id")+"_minimized";e("#translation_panel_tabs_minimized a").removeClass("active"),e("#translation_panel_tabs_minimized").find("#"+i).addClass("active"),_.translationDialog.content.find("#translation_panel_tabs_content .jipt-tab-pane").hide();var a=e(this).attr("href").substring(e(this).attr("href").indexOf("#"));_.translationDialog.content.find(a).show()}return!1})),e("#translation_panel_tabs_minimized a").click((function(t){if(!e(this).hasClass("active")){e(this).closest("ul").find("a").removeClass("active"),e(this).addClass("active");var i=e(this).attr("id").replace("_minimized","");e("#translation_panel_tabs a").removeClass("active"),e("#translation_panel_tabs").find("#"+i).addClass("active"),_.translationDialog.content.find("#translation_panel_tabs_content .jipt-tab-pane").hide();var a=e(this).attr("href").substring(e(this).attr("href").indexOf("#"));_.translationDialog.content.find(a).show()}return!1})),e("#show_translations, #show_translations_minimized").click((function(){_.panel_pages&&e("#translation_panel_paging_wrapper").show(),_.translationDialog.parent().removeClass("jipt_options")})),e("#show_options, #show_options_minimized").click((function(){e("#translation_panel_paging_wrapper").hide(),_.translationDialog.parent().addClass("jipt_options")})),e("#jipt-screenshot, #jipt-screenshot_minimized").click((function(){e("#translation_panel_paging_wrapper").hide()})),e("#jipt-shortctut-preview-toggle").click((function(t){s("preview",_.translations_preview?"no":"yes"),_.init_preview(),_.set_translations_preview(),_.translationDialog.content.find("#jipt-translations-preview").prop("checked",_.translations_preview),e(this).toggleClass("active")})),e("#jipt-shortctut-highlight-toggle").click((function(t){s("highlight",_.translations_highlight?"no":"yes"),_.init_highlight(),_.translationDialog.content.find("#jipt-translations-highlight").prop("checked",_.translations_highlight),e(this).toggleClass("active")})),_.translationDialog.content.find("#make_screenshot").click((function(){if(_.user.isManager){e(this).attr("disabled",!0);var t=!1,i=!1;"yes"===r("preview")&&(t=!0,s("preview","no"),_.init_preview(),_.set_translations_preview()),"yes"===r("highlight")&&(i=!0,s("highlight","no"),_.init_highlight()),_.translationDialog.content.find("#screenshot-status").addClass("alert-gray").text("Uploading...").show();var a=window.devicePixelRatio,n=function(t){return 2===t?"@2x":t>=3?"@3x":""};__html2canvas(document.body,{proxy:d.getFullUrl("/api/v2/jipt/project/"+_.projectId+"/screenshots"),allowTaint:!0,scrollY:0,scrollX:0,height:document.body.scrollHeight,windowHeight:document.body.scrollHeight,logging:!0}).then((function(e){var o=[];for(var r in _.phrases){var l=_.phrases[r].data;if(l.elements&&"not_found"!==l.status)for(elementKey in l.elements){var p,c,u,g,h=l.elements[elementKey],f=h.element.ownerDocument.defaultView,m=h.element.getBoundingClientRect();p=Math.round((Math.round(+m.x)+f.pageXOffset)*a),c=Math.round((Math.round(+m.y)+f.pageYOffset)*a),u=Math.round(Math.round(+m.width)*a),c+(g=Math.round(Math.round(+m.height)*a))>e.height||p+u>e.width||p&&c&&u&&g&&o.push({position:{x:p,y:c,width:u,height:g},stringId:+h.id})}}i&&(s("highlight","yes"),_.init_highlight()),t&&(s("preview","yes"),_.init_preview(),_.set_translations_preview());var v=e.toDataURL("image/jpeg",.5),w=document.title;document.title||(w=window.location.hostname+window.location.pathname);w=w.replace(/\\|\/|:|\*|\?|"|<|>|\|/gi,"."),_.translationDialog.content.find("#screenshot-status").html("Tagging strings...");var b={msg_type:"make_screenshot",storage_url:d.getFullUrl("/api/v2/jipt/storages"),project_url:d.getFullUrl("/api/v2/jipt/project/"+_.projectId),data_url:v,storage_screenshot_name:w,scale:n(a),accumulated_data_for_tags:o};_.send_post_message(b)})).catch(_.handle_make_screenshot_error)}})),_.translationDialog.content.find(".jipt-search-phrase").on("input propertychange",(function(){clearTimeout(a),_.panel_search_phrase=this.value;var t=e(this).parent().find(".jipt-clear-btn");_.panel_search_phrase?t.show():t.hide(),a=setTimeout((function(){_.rebuild_panel_phrases(_.panel_search_phrase)}),300)})),e("#translation_panel_prev_page").click((function(){return _.panel_page>0&&_.rebuild_panel_phrases(_.panel_search_phrase,_.panel_page-1),!1})),e("#translation_panel_next_page").click((function(){return _.panel_page+1<_.panel_pages&&_.rebuild_panel_phrases(_.panel_search_phrase,_.panel_page+1),!1})),_.translationDialog.content.find(".jipt-clear-btn").click((function(){var t=e(this).siblings('input[type="text"]').val("");return _.panel_search_phrase="",_.rebuild_panel_phrases(),e(this).hide(),t.focus(),!1})),e("#translation_panel_current_page").click((function(){return e(this).val(_.panel_page+1),e(this).select(),!1})),e("#translation_panel_paging").submit((function(){var t=e("#translation_panel_current_page").val();return _.rebuild_panel_phrases(_.panel_search_phrase,t-1),e("#translation_panel_current_page").blur(),!1}))},handle_make_screenshot_error:function(t){_.translationDialog&&(_.translationDialog.content.find("#screenshot-status").removeClass("alert-gray").addClass("alert-error").text("Something went wrong. Please, try again or contact support"),_.translationDialog.content.find("#make_screenshot").attr("disabled",!1))},handle_init_access_storage:function(t){t.has_access?(_.editorAccessStorageDialog.jiptDialog({action:"close"}),_.init_login_panel(),_.init_highlight(),_.init_preview(),_.init_filter(),_.init_touch_optimized(),_.init_project()):_.editorAccessStorageDialog.jiptDialog({action:"open"})},init_project:function(){var t=p(),e=r("language_code"),i=+r("workflow_step_id")||void 0,a={msg_type:"init_project",url:d.getFullUrl("/api/v2/jipt/project/"+t),data:{origin:document.location.protocol+"//"+document.location.host,pathName:document.location.pathname+document.location.search,languageCode:e||"",workflowStepId:i,preloadTexts:o.preload_texts}};_.send_post_message(a)},handle_init_project_data:function(t){const e=t.response;var i=r("language_id"),a=r("language_code"),n=r("language_name"),s=+r("workflow_step_id")||void 0;for(var l of(o.preload_texts=JSON.parse(e.data.preloadTexts),_.user.isLoggedIn=e.data.isLoggedIn,_.user.isLeader=e.data.isLeader,_.user.isManager=e.data.isManager,_.user.login=e.data.login,_.user.name=e.data.userName,_.user.picture=e.data.userPicture,_.user.workflowStepId=e.data.workflowStepId,_.user.redirectHash=e.data.redirectHash,_.workflowStepIds=e.data.workflowStepIds,_.source_language.code=e.data.sourceLanguageCode,_.target_languages=e.data.targetLanguages,_.workflowSteps=e.data.workflowSteps||[],_.projectLink=e.data.editorLink,_.projectId=e.data.projectId,_.projectModelId=e.data.projectModelId,_.projectName=e.data.projectName,_.projectURL=e.data.projectUrl,_.pluralsPreview=e.data.pluralsPreview,_.hasIcu=e.data.hasIcu,Object.keys(e.data.placeholdersRegexps)))_.regexp.placeholders[l]=new RegExp(e.data.placeholdersRegexps[l],"gi");e.data.isLoggedIn?a&&n&&i&&!e.data.missedLanguage?(_.language.code=a,_.language.id=i,_.language.name=n,_.workflowStep.id=s,_.init_editor()):_.show_languages_panel():_.show_login_panel()},init_translations:function(){_.alertFunction=window.alert,window.alert=function(){return _.handle_browser_popups(_.alertFunction,this,arguments)},_.confirmFunction=window.confirm,window.confirm=function(){return _.handle_browser_popups(_.confirmFunction,this,arguments)},_.promptFunction=window.prompt,window.prompt=function(){return _.handle_browser_popups(_.promptFunction,this,arguments)},_.hasIcu&&_.init_icu(),_.init_translation_panel()},handle_browser_popups:function(t,e,arguments){for(var i=[],a=0;a<arguments.length;a++)arguments[a]=arguments[a].replace(_.regexp.globalPhrase,(function(t,e,a){var n=_.phrases[e].data;if(n){i.push(n);var s=_.get_source_segment(n,a),r=_.phrase2preview(n,n.isIcu?_.get_icu_placeholders(s,t):_.get_placeholders(s,t,n.fileFormat),a);return o.edit_strings_context&&_.update_strings_context(n.id,n.context),!1===(r=o.before_dom_insert(r))?t:r}return _._load_phrases_delayed(t,(function(){})),t}));var n=t.apply(e,arguments);return i.length>0&&_.show_editor(i[0]),n},init_dom_mutation_handler:function(){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;t&&new t((function(t){t.forEach((function(t){_.handle_dom_mutation(t)}))})).observe(document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0,attributeOldValue:!0})},handle_dom_mutation:function(t){if("childList"===t.type){for(var i=0;i<t.addedNodes.length;i++)_.crowdin_each_element(t.addedNodes[i]);t.removedNodes.length&&_.translations_filter&&_.remove_phrases_not_on_page()}if("characterData"===t.type&&3===t.target.nodeType&&_.match_element_text(t.target,t.target.parentNode),_.check_if_jipt_class_was_removed(t)){var a=t.oldValue.match(/crowdin_jipt_[^\s-]+/);a[0]&&e(t.target).addClass(a[0])}"attributes"===t.type&&_.match_element_attributes(t.target)},check_if_jipt_class_was_removed:function(t){return"attributes"===t.type&&"class"===t.attributeName&&"function"==typeof t.target.className.indexOf&&-1===t.target.className.indexOf("crowdin_jipt_")&&t.oldValue&&-1!==t.oldValue.indexOf("crowdin_jipt_")},remove_phrases_not_on_page:function(){for(var t in _.phrases){var i=_.phrases[t].data;if(i.elements)for(var a=0;a<i.elements.length;a++)if(!e(document.body).find(i.elements[a].element).length&&(i.elements.splice(a,1),!i.elements.length)){delete i.elements;break}}_.delayed_rebuild_panel_phrases()},findTextsDOM:function(){for(var t in self.status)e(".crowdin_jipt_"+this.status[t]).removeClass("crowdin_jipt_"+this.status[t]);var i=_.get_phrases_from_text(document.documentElement.innerHTML);return e.isEmptyObject(i)&&(e.extend(_.regexp,_.regexp_new),i=_.get_phrases_from_text(document.documentElement.innerHTML)),i},load_phrases:function(){var t=this.findTextsDOM(),i=this;e.isEmptyObject(t)&&setTimeout((function(){var t=i.findTextsDOM();_.user.isManager&&e.isEmptyObject(t)&&"yes"!==r("no_phrases_warning_disabled")&&i._show_no_texts_warning()}),5e3),_._load_phrases(t,[()=>{var t;document.getElementsByTagName("title").length&&_.handle_document_title(document.getElementsByTagName("title")[0]),_.crowdin_each_element(document.body),_.init_dom_mutation_handler(),(t=document.getElementById("crowdin-jipt-mask"))&&t.parentNode.removeChild(t)}])},init_editor:function(){var t=650,i=document.documentElement.clientHeight;t=t+110>i?i-110:t,_.editorDialog=e('<div id="crowdin-editor">'),_.editorDialog.jiptDialog({width:"550px",height:t+"px",save_position:!0,modal:!1,drags:!0,resize:!0,icon:"crowdin",custom_class:"jipt-editor-dialog",minimize_btn:"",close_callback:function(){_.place_translation_preview(),e(".jipt-selected").removeClass("jipt-selected")},title_pane:"<h4>Translating to "+_.language.name+"</h4>"}),_.editorDialog.append('<iframe frameBorder="0" id="crowdin-editor-iframe"></iframe>'),_.editorDialogIframe=e("iframe#crowdin-editor-iframe"),_.editorDialogIframe.css({width:"100%",display:"block",overflow:"hidden",height:t+"px"}),_.editorDialogIframe.attr("src",_.projectLink)},send_post_message:function(t){t=JSON.stringify(t);const e=_.editorDialogIframe||_.editorAccessStorageDialogIframe;e.length&&e.get(0).contentWindow.postMessage(t,d.getEntryPoint())},init_editor_listener:function(){window.onmessage=function(t){if((t=t||window.event).origin===d.getEntryPoint()){var e="object"==typeof t.data?t.data:JSON.parse(t.data);switch(e.msg_type){case"request_jipt_error":"string"==typeof e.response||e.response instanceof String?_._show_error_dialog(e.response,e.hide_logout_link):_._handle_jipt_error(e.response);break;case"init_access_storage":_.handle_init_access_storage(e);break;case"init_project_data":_.handle_init_project_data(e);break;case"load_phrases_data":_.handle_load_phrases_data(e);break;case"make_screenshot_data":_.handle_make_screenshot_data(e);break;case"make_screenshot_error":_.handle_make_screenshot_error();break;case"edit_translation":_.editor.currentTranslation&&!1!==_.translations_preview&&_.editorDialog.jiptDialog({action:"is_visible"})&&(e.value.length>0?_.place_translation_preview(+e.translation_id,e.value,e.plural_id):_.place_translation_preview());break;case"update_phrase":case"update_translation":var i=_.editor.currentTranslation;if(_.editor.currentTranslation=_.phrases[e.translation_id].data,"top_suggestion"in e){var a=e.plural_id>=0?e.plural_id:0;_.editor.currentTranslation.translation[a]=e.top_suggestion,_.editor.currentTranslation.status=e.translation_status,_.place_translation_preview()}else _.editor.currentTranslation.hidden=e.translation.hidden;_.update_phrase_dom_highlight(),_.update_phrase_highlight(),_.editor.currentTranslation=i;break;case"next_translation":_.editor.currentTranslation&&(_.place_translation_preview(),_.show_next_element(_.editor.currentTranslation.active_element));break;case"prev_translation":_.editor.currentTranslation&&(_.place_translation_preview(),_.show_prev_element(_.editor.currentTranslation.active_element));break;case"success":_.init_translations(),_.editor_loaded=!0,_.setup_jipt_validation(),_.editor.currentTranslation&&_.show_editor(_.editor.currentTranslation,_.editor.currentTranslation.active_element);break;case"close_editor":_.editorDialog.jiptDialog({action:"close"});break;case"focus":_.editorDialog.jiptDialog({action:"move_to_front"});break;case"before_commit":_.handle_before_commit_request(e.request_id,e.data);break;case"save_suggestions":_.handle_save_suggestions(e.data);break;case"editor_settings":_.editor_settings();break;case"close_editor_settings":_.open_editor_settings=!1,_.close_editor_dialog();break;case"hotkeys_settings":_.hotkeys_settings();break;case"close_hotkeys_settings":_.open_hotkeys_settings=!1,_.close_editor_dialog();break;case"logged_out":window.location.reload();break;default:return}}}},close_editor_dialog:function(){e(".jipt-dialog-title h4",".jipt-editor-dialog").text("Translating to "+_.language.name),_.editor.currentTranslation||_.open_editor_settings||_.open_hotkeys_settings||_.editorDialog.jiptDialog({action:"close"})},setup_jipt_validation:function(){var t={msg_type:"setup_jipt_validation",validation_enabled:null!==o.before_commit};_.send_post_message(t)},handle_before_commit_request:function(t,e){var i={msg_type:"before_commit_result",request_id:t,result:o.before_commit(e.source,e.translation,e.context,e.language)};_.send_post_message(i)},handle_save_suggestions:function(t){if(!this.callbacks.save_suggestions)return!1;"function"==typeof this.callbacks.save_suggestions&&this.callbacks.save_suggestions(t)},set_draft_suggestion:function(t,e){var i={msg_type:"set_draft_suggestion",translation_id:t,text:e};_.send_post_message(i)},save_suggestions:function(t,e,i){this.callbacks.save_suggestions=i;var a={msg_type:"save_suggestions",suggestions:t,force_saving:e};_.send_post_message(a)},editor_settings:function(){_.open_editor_settings=!0;_.send_post_message({msg_type:"editor_settings"})},hotkeys_settings:function(){_.open_hotkeys_settings=!0;_.send_post_message({msg_type:"hotkeys_settings"})},place_translation_preview:function(t,e,i){if(_.translation_preview.id=t,_.translation_preview.value=e,_.translation_preview.plural_id=i>=0?i:0,_.editor.currentTranslation){var a,n=_.editor.currentTranslation.elements;if(n)for(var s=0;s<n.length;s++)a=_.phrase2preview(_.phrases[n[s].id].data,n[s].placeholders,n[s].plural_id),!1!==(a=!1!==n[s].attr?o.before_dom_insert(a,n[s].element,n[s].attr):o.before_dom_insert(a,n[s].element))&&(!1!==n[s].attr?(n[s].element.setAttribute(n[s].attr,a),o.touch_optimized&&!_.touch_optimized&&_.hide_translation_badge(n[s].element)):void 0!==n[s].element.innerHTML?n[s].element.innerHTML=a:n[s].element.textContent=a,_.touch_optimized&&_.show_translation_badge(n[s].element))}},set_translations_preview:function(){var t=_.editor.currentTranslation;for(var e in _.phrases)_.editor.currentTranslation=_.phrases[e].data,_.place_translation_preview();_.editor.currentTranslation=t},crowdin_each_element:function(t){if("crowdin-translation-panel"!==t.id&&"crowdin-editor"!==t.id){if(_.match_element_attributes(t),t.hasChildNodes())for(var e=0;e<t.childNodes.length;e++)_.crowdin_each_element(t.childNodes[e]),_.match_element_attributes(t.childNodes[e]);if(t&&3===t.nodeType&&t.nodeValue.length){var i=t.nodeValue.match(_.regexp.startPhrase);i&&(t.nodeValue.toLowerCase().indexOf(_.regexp.endPart(i[1],i[2]))>-1?_.match_element_text(t,t.parentNode):_.match_element_html(t,i[1],i[2]))}}},match_element_text:function(t,i){if(i&&"SCRIPT"!==i.nodeName&&t.parentNode){var a=t.nodeValue.match(_.regexp.exactPhrase),n=t.parentNode.childNodes.length;if(a&&1===n)_.phrases[a[1]]?_.handle_element(t.parentNode,_.phrases[a[1]].data,a[2]):_._load_phrases_delayed(t.nodeValue,(function(){_.match_element_text(t,i)}));else{var o=t.nodeValue.replace(_.regexp.globalPhrase,'<span class="crowdin_phrase">$&</span>');if(o!==t.nodeValue){e(t).replaceWith(o);for(var s=0;s<i.childNodes.length;s++){var r=i.childNodes[s];"crowdin_phrase"===r.className&&3===r.firstChild.nodeType&&_.match_element_text(r.firstChild,r)}}}}},match_element_html:function(t,i,a){if(t.parentNode){var n=t.parentNode.innerHTML.match(_.regexp.exactPhrase);if(n)_.phrases[n[1]]?_.handle_element(t.parentNode,_.phrases[n[1]].data,n[2]):_._load_phrases_delayed(t.parentNode.innerHTML,(function(){_.match_element_html(t,i,a)}));else{var o=t,s=[],r="",l=!0;do{if(s.push(o),r+=o.nodeValue?u(o.nodeValue):o.outerHTML,3===o.nodeType&&o.nodeValue.toLowerCase().indexOf(_.regexp.endPart(i,a))>-1){l=!1;break}o=o.nextSibling}while(o);if(l)return;r=r.replace(_.regexp.globalPhrase,'<span class="crowdin_phrase">$&</span>');var d=t.parentNode;e(s[0]).before(r);for(var p=0;p<s.length;p++)d.removeChild(s[p]);for(p=0;p<d.childNodes.length;p++){var c=d.childNodes[p];"crowdin_phrase"===c.className&&3===c.firstChild.nodeType&&_.crowdin_each_element(c)}}}},match_element_attributes:function(t){var i,a,n,s=e(t);if(t&&t.attributes)for(t.value&&!t.getAttribute("value")&&t.setAttribute("value",t.value),n=0;n<t.attributes.length;n++)a=(i=t.attributes.item(n)).nodeValue.replace(_.regexp.globalPhrase,(function(e,a,n){var r=_.phrases[a];if(r){_.translatable_placeholders=[];var l=_.get_source_segment(r.data,n),d=r.data.isIcu?_.get_icu_placeholders(l,e):_.get_placeholders(l,e,r.fileFormat),p=_.phrase2preview(r.data,d,n);if(i.nodeValue.length===e.length){r.data.elements||(r.data.elements=[],_.delayed_rebuild_panel_phrases());var c={id:r.data.id,element:t,placeholders:d,attr:i.nodeName,plural_id:n};_.addPhraseToElement(s,c),r.data.elements.push(c);for(var u=0;u<_.translatable_placeholders.length;u++){var g=_.translatable_placeholders[u];o.edit_strings_context&&_.update_strings_context(g.phrase.id,g.phrase.context),g.phrase.elements||(g.phrase.elements=[],_.delayed_rebuild_panel_phrases()),_.addPhraseToElement(s,{id:g.phrase.id,placeholders:g.placeholders,attr:c.attr,plural_id:g.plural_id}),g.phrase.elements.push(c)}s.addClass(_.element_classname(s)),s.mouseenter((function(){_.hover_show_translation_badge(t)})),_.touch_optimized&&_.show_translation_badge(t)}return o.edit_strings_context&&_.update_strings_context(r.data.id,r.data.context),p}return _._load_phrases_delayed(e,(function(){_.match_element_attributes(t)})),e})),i.nodeValue!==a&&!1!==(a=o.before_dom_insert(a,t,i.nodeName))&&(i.nodeValue=a,"value"===i.name&&(t.value=a))},get_translation_segment:function(t,e){return e=(e=parseInt(e))||0,void 0!==t.translation[e]?t.translation[e]:t.translation[0]},get_source_segment:function(t,e){return e=(e=parseInt(e))||0,void 0!==t.text[e]?t.text[e]:t.text[0]},get_placeholders:function(t,e,i){var a=[],n=[],o=_.regexp.placeholders[i]||_.regexp.placeholders.default,s=t.match(o),r=e.match(_.regexp.exactPhrase);if(r&&r[3]){var l=_.regexp.delimiterPart(r[1],r[2]);n=r[3].toLowerCase().indexOf(l)>=0?_.split(r[3],l):[r[3]]}return null!==s&&(a=s),[a,n]},get_icu_placeholders:function(t,e){var i,a=[],n=[],o=e.match(_.regexp.exactPhrase);if(o&&o[3]){var s=_.regexp.delimiterPart(o[1],o[2]);i=o[3].toLowerCase().indexOf(s)>=0?_.split(o[3],s):[o[3]]}for(var r=0;r<i.length;r++){var l=i[r].split("=");a.push(l.shift()),n.push(l.join("="))}return[a,n]},handle_document_title:function(t){t.firstChild&&(t.innerHTML=_.regexp.wrapText(t.innerHTML),_.phrases[0]={data:{id:"0",text:["%s"],translation:[""],hidden:"0",status:"translated"}},_.match_element_text(t.firstChild,t))},is_editor_element:function(t){return"#crowdin-editor"===t.data("id")},handle_element:function(t,i,a){var n,s,r,l=e(t),d=_.get_source_segment(i,a);this.translatable_placeholders=[],s=void 0!==t.innerHTML?t.innerHTML:t.textContent,r=i.isIcu?_.get_icu_placeholders(d,s):_.get_placeholders(d,s,i.fileFormat),n=_.phrase2preview(i,r,a),o.edit_strings_context&&_.update_strings_context(i.id,i.context),!1!==(n=o.before_dom_insert(n,t))&&(void 0!==t.innerHTML?t.innerHTML=n:t.textContent=n);var p={id:i.id,element:t,placeholders:r,attr:!1,plural_id:a};i.elements||(i.elements=[],_.delayed_rebuild_panel_phrases()),_.addPhraseToElement(l,p),i.elements.push(p);for(var c=0;c<this.translatable_placeholders.length;c++)this.translatable_placeholders[c].phrase.elements||(this.translatable_placeholders[c].phrase.elements=[],_.delayed_rebuild_panel_phrases()),o.edit_strings_context&&_.update_strings_context(this.translatable_placeholders[c].phrase.id,this.translatable_placeholders[c].phrase.context),_.addPhraseToElement(l,{id:this.translatable_placeholders[c].phrase.id,placeholders:this.translatable_placeholders[c].placeholders,attr:p.attr,plural_id:this.translatable_placeholders[c].plural_id}),this.translatable_placeholders[c].phrase.elements.push(p);if(_.is_editor_element(l)||l.addClass(_.element_classname(l)),l.is("option")||l.parent().is("option")){var u=l.closest("select");u&&(u.addClass(_.element_classname(u)),t=u.get(0))}_.editor.currentTranslation&&_.editor.currentTranslation.id===+i.id&&(_.editor.currentTranslation=i,_.update_active_phrase_highlight()),e(t).off("mouseenter").mouseenter((function(){_.hover_show_translation_badge(t)})),_.touch_optimized&&!e(t).is("select")&&_.show_translation_badge(t)},phrase2preview:function(t,e,i){var a=_.get_translation_segment(t,i),n=_.pluralsPreview||1===t.text.length,o="";if(this.translation_preview.id===t.id&&+this.translation_preview.plural_id==+i&&(o=this.translation_preview.value),n&&!0===_.translations_preview&&o.length)return t.isIcu?_.replace_placeholders_icu(o,e):_.replace_placeholders(o,e,t.fileFormat);if(n&&!0===_.translations_preview&&a.length)return t.isIcu?_.replace_placeholders_icu(a,e):_.replace_placeholders(a,e,t.fileFormat);var s=_.get_source_segment(t,i);return t.isIcu?_.replace_placeholders_icu(s,e):_.replace_placeholders(s,e,t.fileFormat)},replace_placeholders_icu:function(t,e){for(var i=e[0].slice(0),a=e[1].slice(0),n=0;n<a.length;n++)a[n]=a[n].replace(_.regexp.globalPhrase,(function(t,e,i){var a=_.phrases[e];if(a){var n=_.get_source_segment(a.data,i),o=a.data.isIcu?_.get_icu_placeholders(n,t):_.get_placeholders(n,t,a.fileFormat);return _.translatable_placeholders.push({phrase:a.data,placeholders:o,plural_id:i}),_.phrase2preview(a.data,o,i)}return t}));var o={},s=new MessageFormatLight(_.language.code);for(n=0;n<i.length;n++)o[i[n]]=a[n];return(t=s.compiler(t,o))?_.sanitizing_text(t):_.insert_source_text_in_dom()},insert_source_text_in_dom:function(){var t,e=_.editor.currentTranslation;if(e.isIcu){for(var i=e.elements[0].placeholders,a={},n=new MessageFormatLight(_.language.code),o=0;o<i[0].length;o++)a[i[0][o]]=i[1][o];t=n.compiler(e.text[0],a)}else t=_.get_source_segment(e,e.elements[0].plural_id);return _.sanitizing_text(t)},sanitizing_text:function(t){return t=sanitizer.tags(t,["meta","base","iframe","object","embed","script","style","isindex","applet","form"]),t=(t=(t=sanitizer.attributes(t)).replace(/\b(on\w+=(["'])?.*?\2)/gi,"")).replace(/\\n/g,"\n")},replace_placeholders:function(t,e,i){for(var a=e[0].slice(0),n=e[1].slice(0),o=0;o<n.length;o++)n[o]=n[o].replace(_.regexp.globalPhrase,(function(t,e,a){var n=_.phrases[e];if(n && n.data){var o=_.get_source_segment(n.data,a),s=n.data.isIcu?_.get_icu_placeholders(o,t):_.get_placeholders(o,t,i);return _.translatable_placeholders.push({phrase:n.data,placeholders:s,plural_id:a}),_.phrase2preview(n.data,s,a)}return t}));if(n.length>0){var s=_.regexp.placeholders[i]||_.regexp.placeholders.default;t=t.replace(s,(function(t){for(var e=0;e<a.length;e++)if(a[e]===t&&void 0!==n[e]){var i=n[e];return a.splice(e,1),n.splice(e,1),i}return t}))}return _.sanitizing_text(t)},get_element_position:function(t){var i,a,n,o=0,s=0,r=0,l=0,d=!1,p=t;for("OPTION"===t.tagName&&(t=e(t).closest("select").get(0));t;)"fixed"===(i=window.getComputedStyle(t)).getPropertyValue("position")&&(d=!0),o+=t.offsetLeft-t.scrollLeft+t.clientLeft,s+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent===document.body?null:t.offsetParent;for(t=p;t;)(n=(a=(i=window.getComputedStyle(t)).transform||i.webkitTransform||i.mozTransform).match(/^matrix3d\((.+)\)$/))?(r=parseFloat(n[1].split(", ")[12]),l=parseFloat(n[1].split(", ")[13])):(r=(n=a.match(/^matrix\((.+)\)$/))?parseFloat(n[1].split(", ")[4]):0,l=n?parseFloat(n[1].split(", ")[5]):0),o+=r,s+=l,t=t.parentElement===document.body?null:t.parentElement;return{left:o,top:s,position:d?"fixed":"absolute"}},create_translation_badge:function(t){var i="crowdin-translation-badge",a=e("#"+i),n=!1;if(_.touch_optimized&&!e(t).is("area, base, br, col, command, embed, hr, img, input, textarea, wbr")&&(n=!0),!a.length||n){var o=_.dialog_zindex;a=e('<span data-html2canvas-ignore="true" class="crowdin-jipt"><span class="jipt-badge-inner"></span></span>'),n?0===e(t).children("."+i).length&&a.addClass(i).prependTo(e(t)):a.attr("id",i).css("position","absolute").css("z-index",--o).appendTo("body").mouseleave((function(){_.hide_translation_badge()}))}if(!n){var s=_.get_element_position(t);a.css("top",s.top-7+"px").css("left",s.left-7+"px").css("position",s.position)}return a},get_element_data:function(t){var i=[],a=!1;if(e(t).data("phrases"))i=e(t).data("phrases");else{var n=e(t).find("[class*=crowdin_jipt]");if(!n.length)return;i=n.first().data("phrases"),a=!0}return{is_parent_element:a,phrases:i,phrase:_.phrases[i[0].id].data}},show_translation_badge:function(t){var i=_.get_element_data(t);if(i){var a=i.phrase,n=_.create_translation_badge(t);i.is_parent_element&&(t=e(t).find("[class*=crowdin_jipt]").get(0)),n.show().off("click").on("click",(function(e){return i.phrases.length>1||a.hidden||_.get_phrase_status(a.status)===_.status.not_found||_.get_phrase_status(a.status)===_.status.not_visible_on_step||_.get_phrase_status(a.status)===_.status.file_not_available_for_language?_.show_badge_popup(t,i.phrases):_.show_editor(a,t),e.stopPropagation(),e.preventDefault(),!1}))}},hover_show_translation_badge:function(t){(!_.touch_optimized||e(t).is("select")||0===e(t).children(".crowdin-translation-badge").length)&&setTimeout((function(){_.show_translation_badge(t)}),1)},show_badge_popup:function(t,i){_.hide_translation_badge();var a=_.get_element_position(t),n="<ul>";e("#crowdin-translation-badge-popup").length?e("#crowdin-translation-badge-popup").html(""):e("body").append(e("<div>").attr("id","crowdin-translation-badge-popup").addClass("crowdin-jipt").css({position:"absolute","z-index":_.dialog_zindex-1,display:"none"})),e("#crowdin-translation-badge-popup").css("top",a.top+"px").css("left",a.left+"px").css("position",a.position);for(var o=0;o<i.length;o++){var s=i[o].id,r=_.get_phrase_status(_.phrases[s].data.status)===_.status.not_found,l=_.get_phrase_status(_.phrases[s].data.status)===_.status.not_visible_on_step,d=_.get_phrase_status(_.phrases[s].data.status)===_.status.file_not_available_for_language;n+='<li class="'+(!_.user.isLeader&&_.phrases[s].data.hidden||r||l||d?"disabled":"")+'"><a href="javascript:void(0)" data-id="'+s+'" class="popup-phrase '+(_.phrase_classname(_.phrases[s].data)+"_popup")+'">',i[o].attr&&(n+='<span class="popup-phrase-attr">'+i[o].attr+":</span>"),_.phrases[s].data.hidden&&(n+='<span class="popup-phrase-attr">This string is hidden and should not be translated.</span>'),r&&(n+='<span class="popup-phrase-attr">String is not loaded. Probably it has been deleted.</span>'),l&&(n+='<span class="popup-phrase-attr">This string is not included in the workflow step</span>'),d&&(n+='<span class="popup-phrase-attr">Seems like '+_.language.name+" is not enabled as a target language <br>for the file this string comes from.</span>");var p=[[],[]];_.phrases[s].data.isIcu&&(p=i[o].placeholders);var c=_.phrase2preview(_.phrases[s].data,p,i[o].plural_id);n+=e("<span>"+c+"</span>").text(),n+="</a></li>"}n+="</ul>",e("#crowdin-translation-badge-popup").html(n).show(),e("#crowdin-translation-badge-popup li:not(.disabled) a.popup-phrase").click((function(i){var a=e(i.target).closest("a.popup-phrase").data("id");return e("#crowdin-translation-badge-popup").hide(),_.show_editor(_.phrases[a].data,t),!1})),_.autoHideBadgePopup()},autoHideBadgePopup:function(){e(document).one("utapstart mousedown",(function(t){0===e(t.target).closest("#crowdin-translation-badge-popup").length?e("#crowdin-translation-badge-popup").hide():_.autoHideBadgePopup()}))},hide_translation_badge:function(t){e("#crowdin-translation-badge").hide(),void 0!==t&&e(t).children(".crowdin-translation-badge").remove()},update_active_phrase_highlight:function(){if(e(".jipt-selected").removeClass("jipt-selected"),_.editor.currentTranslation.elements)for(var t=0;t<_.editor.currentTranslation.elements.length;t++){var i=e(_.editor.currentTranslation.elements[t].element);if(i.addClass("jipt-selected"),i.is("option")||i.parent().is("option")){var a=i.closest("select");a&&a.addClass("jipt-selected")}}},highlight_panel_opened_phrase:function(){_.editor.currentTranslation&&(_.translationDialog.content.find("#jipt-translations").find("li.active").removeClass("active"),_.translationDialog.content.find("#jipt-translations").find("a[rel="+_.editor.currentTranslation.id+"]").parent().addClass("active"))},update_phrase_dom_highlight:function(){if(_.editor.currentTranslation.elements)for(var t=0;t<_.editor.currentTranslation.elements.length;t++){var i=_.editor.currentTranslation.elements[t].element,a=e(i),n=_.element_classname(a);if(a.removeClass((function(t,e){return(e.match(/\bcrowdin_jipt_\S+/g)||[]).join(" ")})).addClass(n),a.is("option")||a.parent().is("option")){var o=a.closest("select");if(o)for(var s in o.removeClass((function(t,e){return(e.match(/\bcrowdin_jipt_\S+/g)||[]).join(" ")})),_.status)o.find("[class*=crowdin_jipt_"+_.status[s]+"]").length&&o.addClass("crowdin_jipt_"+_.status[s])}}},update_phrase_highlight:function(){if(_.editor.currentTranslation){var t=_.phrase_classname(_.editor.currentTranslation)+"_item";_.translationDialog.content.find("#jipt-translations a[rel="+_.editor.currentTranslation.id+"]").removeClass((function(t,e){return(e.match(/\bcrowdin_jipt_\S+/g)||[]).join(" ")})).addClass(t)}},get_next_phrase:function(t){var i={id:null,element:null},a=e(t);if(a.length){var n=_.get_first_untranslated(a,"next",!0);if(!n){var o=".crowdin_jipt_untranslated, .crowdin_jipt_partially_translated";if(!(a=_.findNext("next",a,o)||_.findNext("next",e(document),o)))return i;if(n=_.get_first_untranslated(a),!parseInt(n))return _.get_next_phrase(a)}i.id=n,i.element=a}return i},get_prev_phrase:function(t){var i={id:null,element:null},a=e(t);if(a.length){var n=_.get_first_untranslated(a,"prev",!0);if(!n&&(a=_.findNext("prev",a,".crowdin_jipt_untranslated, .crowdin_jipt_partially_translated")).length&&(n=_.get_first_untranslated(a,"prev"),!parseInt(n)))return _.get_prev_phrase(a);i.id=n,i.element=a}return i},show_next_element:function(t){var i=_.get_next_phrase(t);if(!i.id){var a=_.findNext("next",e(t),".crowdin_phrase")||_.findNext("next",e(document),".crowdin_phrase");return a&&_.show_editor(_.get_element_data(a).phrase,a),void _.refresh_suggestions()}_.show_editor(_.phrases[i.id].data,i.element.get(0))},show_prev_element:function(t){var i=_.get_prev_phrase(t);if(i.id)_.show_editor(_.phrases[i.id].data,i.element.get(0));else{var a=_.findNext("prev",e(t),".crowdin_phrase")||_.findNext("prev",e(document),".crowdin_phrase");if(a){var n=_.get_element_data(a).phrase;if(!n.visibleOnStep)return void _.show_prev_element(a[0]);_.show_editor(n,a)}}},get_first_untranslated:function(t,e,i){var a=null;if(t.data("phrases")){var n=t.data("phrases").slice(),o=!1;"prev"===e&&n.reverse();for(var s=0;s<n.length;s++){var r=_.phrases[n[s].id].data;if((this.get_phrase_status(r.status)===this.status.untranslated||this.get_phrase_status(r.status)===this.status.partially_translated)&&!r.hidden&&0!==r.id){if(!i){a=r.id;break}if(o){a=r.id;break}r.id===_.editor.currentTranslation.id&&(o=!0)}}}return a},show_settings:function(t){"hotkeys"===t?_.hotkeys_settings():_.editor_settings(),e(".jipt-dialog-title h4",".jipt-editor-dialog").text("hotkeys"===t?"Hotkeys Settings":"Editor Settings"),_.editorDialog.jiptDialog({action:"open"})},show_editor:function(t,e){if(!_.user.isLoggedIn)return alert("Login first to be able submit translations"),void _.show_login_panel();_.place_translation_preview(),_.editor.currentTranslation=t,e?_.editor.currentTranslation.active_element=e:_.editor.currentTranslation.elements&&(_.editor.currentTranslation.active_element=_.editor.currentTranslation.elements[0].element),_.update_active_phrase_highlight(),_.editorDialog.jiptDialog({action:"open"}),_.editorDialog.jiptDialog({action:"toggle_minimized_show"}),_.highlight_panel_opened_phrase();var i=[];if(_.editor.currentTranslation.active_element){var a=_.get_prev_phrase(_.editor.currentTranslation.active_element).id,n=_.get_next_phrase(_.editor.currentTranslation.active_element).id;n&&i.push(+n),a&&i.push(+a)}_.show_string(t.id,i)},show_string:function(t,e){var i={msg_type:"show_string",id:t,preload_ids:e};_.send_post_message(i)},refresh_suggestions:function(){_.send_post_message({msg_type:"refresh_suggestions"})},_get_target_languages_options:function(){for(var t=r("language_code"),e="",i="",a=0;a<_.target_languages.length;a++)i="",_.target_languages[a].code===t&&(i="selected"),e+='<option value="'+_.target_languages[a].code+'" data-id="'+_.target_languages[a].id+'" '+i+" >",e+=_.target_languages[a].name,e+="</option>";return e},getWorkflowStepsOptions:function(t){var e=r("workflow_step_id"),i="",a=[{id:0,title:"All Content"}];if(_.workflowSteps.length){_.workflowSteps.forEach((function(e){e.languages.map((function(t){return t.code})).indexOf(t)>=0&&a.push(e)}));for(var n=0;n<a.length;n++){var o=document.createElement("option");o.value=a[n].id,o.innerHTML=a[n].title+(a[n].type?" ("+a[n].type+")":""),+a[n].id==+e&&(o.defaultSelected=!0),i+=o.outerHTML}}return i},show_login_panel:function(){var t=_.loginDialog.content.find("#crowdin-login-language-field");t.html(_._get_target_languages_options()),_.getWorkflowStepsOptions(e(t).val())&&_.loginDialog.content.find("#crowdin-login-workflow-step-field").html(_.getWorkflowStepsOptions(e(t).val())).parents(".workflow-step-group").removeClass("hide"),_.loginDialog.content.find(".crowdin-languages-panel").hide(),_.loginDialog.content.find(".crowdin-login-panel").show(),_.loginDialog.jiptDialog({action:"open",position:"center"}),_.loginDialog.content.find("#crowdin-login-field").focus(),_.place_close_btn()},show_languages_panel:function(){var t=_.loginDialog.content.find("#crowdin-language-field");t.html(_._get_target_languages_options()),_.getWorkflowStepsOptions(e(t).val())&&_.loginDialog.content.find("#crowdin-workflow-step-field").html(_.getWorkflowStepsOptions(e(t).val())).parents(".workflow-step-group").removeClass("hide"),_.loginDialog.content.find(".crowdin-login-panel").hide(),_.loginDialog.content.find(".crowdin-languages-panel").show(),_.loginDialog.jiptDialog({action:"open",position:"center"})},set_current_language:function(t,e,i){_.language.code=t,_.language.id=e,_.language.name=i,s("language_code",t),s("language_id",e),s("language_name",i)},setCurrentWorkflowStep:function(t,e){_.workflowStep.id=t,_.workflowStep.type=e,s("workflow_step_id",t),s("workflow_step_type",e)},_login_action:function(){var t=_.loginDialog.content.find("#crowdin-login-language-field option:selected");_.set_current_language(t.val(),t.data("id"),t.html());var e=_.loginDialog.content.find("#crowdin-login-workflow-step-field option:selected");_.setCurrentWorkflowStep(e.val(),e.html()),window.top.location.href=d.getJiptPath("login")},_join_action:function(){window.top.location.href=d.getJiptPath("join")},_logout_action:function(){var t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"==t?"onmessage":"message",(function(t){"logout"===t.data&&window.location.reload()}),!1);var e=document.createElement("iframe");e.style="display: none;",e.src=d.getAuthEntryPoint("/logout"),document.body.append(e)},search:function(t,i){"[object Object]"===Object.prototype.toString.call(i)&&(i=e.map(i,(function(t){return t})));for(var a=0;a<i.length;a++)if(-1!==i[a].toLowerCase().indexOf(t.toLowerCase()))return!0;return!1},rebuild_panel_phrases:function(t,i){_.translationDialog.content.find(".jipt-phrases-to-translate").html("");var a="",n=0,o=_.panel_pages,s=0;i&&/^\+?(0|[1-9]\d*)$/.test(i)&&(s=i,i>=o&&(s=o-1));var r=50*s;for(var l in _.panel_page=s,_.phrases){var d=_.phrases[l].data;if("0"!==l&&this.get_phrase_status(d.status)!==_.status.not_found&&d.visibleOnStep&&!d.fileNotAvailableForLanguage){var p=!_.user.isLeader&&d.hidden?"disabled":"",c=d.hidden?'title="This string is hidden and should not be translated."':"";(!t||this.search(t,d.text)||this.search(t,d.translation))&&(!0!==_.translations_filter||d.elements)&&(n<r||n>=r+50||(a+="<li "+c+' class="'+p+'"><a href="javascript:void(0)" class="'+(_.phrase_classname(d)+"_item")+'" rel="'+l+'">',a+=u(d.text[0]),a+="</a></li>"),n++)}}var g=_.translations_filter?" The search was made among the texts of current page.":"";if(0===n&&(a+='<li><div style="padding: 30px; text-align: center; color: #999">No items.'+g+"</div></li>"),_.translationDialog.content.find(".jipt-phrases-to-translate").html(a),o=Math.ceil(n/50),_.panel_pages=o,o<2)e("#translation_panel_paging").hide();else{var h=2*o.toString(10).length+3,f=e("#translation_panel_prev_page"),m=e("#translation_panel_next_page");e("#translation_panel_current_page").attr({size:h}).val(s+1+" / "+o),0===s?f.addClass("jipt-page-disabled"):f.removeClass("jipt-page-disabled"),s+1===o?m.addClass("jipt-page-disabled"):m.removeClass("jipt-page-disabled"),e("#translation_panel_paging").show()}_.highlight_panel_opened_phrase()},delayed_rebuild_panel_phrases:function(){clearTimeout(_.rebuild_panel_timeout),_.rebuild_panel_timeout=setTimeout((function(){_.rebuild_panel_phrases(_.panel_search_phrase,_.panel_page)}),500)},getJoinProjectDialogTpl:function(t){var e=d.getEntryPoint(),i=t.joinRequestSent,a=e+(o.domain?t.projectManagersUrl:t.languageUrl),n=o.domain?"contact project manager":"send request",s=!1===Boolean(i)?'<div style="padding: 0; margin: 25px 0 25px"><a href="'+a+'" target="_blank" class="jipt-btn">'+n+"</a></div>":"";return'<div class="text-center jipt-plain-text-content"'+(i?'style="padding: 15px 10px 20px 10px"':"")+">\n"+t.message+s+'<p class="text-center"><a href="#" id="jipt-select-language" style="margin-right: 10px;">Change Language</a>'+this.logoutLinkTpl()+"</p></div>"},mfaSettingsAndLogoutTpl:function(t){return'<p class="text-center"><a target="_blank" href="'+d.getEntryPoint()+t+'" style="margin-right: 10px;">Profile Settings</a>'+this.logoutLinkTpl()+"</p>"},logoutLinkTpl:function(){return'<a id="jipt-join-logout-error" href="#">Logout</a>'},_show_no_texts_warning:function(){var t='<div class="jipt-no-translations-content"><strong>Crowdin In-Context was unable to identify translatable texts.</strong><p>Possible reasons:</p><ul style="margin-left: 15px; list-style-type: square"><li>the pseudo-language is not integrated;</li><li>current application locale is not set to the language that contains Crowdin In-Context pseudo-language;</li><li>there are no translatable texts on this page.</li></ul><p>Check the <a target="_blank" href="'+this.get_in_context_config_url(_)+'">integration guide</a> for more information or <a href="'+(d.getEntryPoint()+"/contacts")+'" target="_blank">contact Crowdin Support</a></p><div class="jipt-control-group"><label class="jipt-checkbox"><input type="checkbox" id="skip_no_phrases_msg">Do not show this message again.</label></div></div>',i=e('<div id="no_texts_warning">').html(t);i.content=i.jiptDialog({modal:!1,width:"550px",height:"320px",iframe:!0,drags:!0,minimize_btn:!1,icon:"crowdin",custom_class:"jipt-no-translations",title_pane:"<h4>Nothing to translate</h4>",buttons_pane:'<div style="text-align:right; margin: 8px 20px;"><button type="button" class="jipt-btn jipt-dialog-close">Close</button></div>'}),i.content.find("#skip_no_phrases_msg").click((function(){1==e(this).prop("checked")?s("no_phrases_warning_disabled","yes"):s("no_phrases_warning_disabled","no")})),i.jiptDialog({action:"open"})},_show_error_dialog:function(t,i){var a=t;!1===(i||!1)&&(a=t+'<p class="text-center">'+this.logoutLinkTpl()+"</p>");var n=e("<div>").html(a);n.jiptDialog({modal:!0,width:"450px",drags:!1,minimize_btn:!1,close_btn:!1,icon:"crowdin",title_pane:"<h4>Crowdin In-Context</h4>"}),n.jiptDialog({action:"open"}),_.place_close_btn(),e("#jipt-join-logout-error").on("click",(function(){_._logout_action()})),e("#jipt-select-language").on("click",(function(){n.jiptDialog({action:"destroy"}),_.set_current_language(void 0,null,void 0),_.init_project(),_.show_languages_panel()}))},_handle_jipt_error:function(t){var e="",i=t.projectId?this.get_in_context_config_url(t):"",a=d.getEntryPoint()+"/contacts";switch(t.errorCode){case"auth_error":alert("Your session has expired. Please log in again"),window.location.reload();break;case"moderate_language":this._show_error_dialog(this.getJoinProjectDialogTpl(t.data),!0);break;case"project_not_found":this._show_error_dialog('<p class="text-center" style="margin: 0 0 10px; padding: 0;"><strong>Translation mode is unavailable.</strong><p class="text-center">Crowdin In-Context can not find appropriate project at Crowdin. Please contact project manager for further assistance.</p>');break;case"jipt_disabled":e=t.data.isManager?'<p class="text-center" style="margin: 0 0 10px; padding: 0;"><strong>Crowdin In-Context is disabled for this project.</strong></p><p class="text-center">Check the <a target="_blank" href="'+i+'">integration guide</a> for more information or <a href="'+a+'" target="_blank">contact Crowdin Support</a></p>':'<p class="text-center" style="margin: 0 0 10px; padding: 0;"><strong>Translation mode is currently disabled.</strong></p><p class="text-center">Please contact <a href="'+t.ownerUrl+'">project manager</a> for further assistance.</p>',this._show_error_dialog(e);break;case"denied":this._show_error_dialog('<p class="text-center">Sorry, you do not have access to this project</p>');break;case"mfa_denied":this._show_error_dialog('<p class="text-center">Project participants are required to have two-factor authentication enabled to be able to access the project</p>'+this.mfaSettingsAndLogoutTpl(t.data.mfa_settings_url),!0);break;case"timeout":this._show_error_dialog('<p class="text-center">Oops. Could not load data from remote server</p>');break;case"language_not_found":l("language_id"),l("language_code"),l("language_name"),this._show_error_dialog('<p class="text-center">The specified language was not found in your project</p>',!0);break;default:this._show_error_dialog('<p class="text-center">Something went wrong while performing request</p>',!0)}},element_classname:function(t){if(t.is("select")){var i=[];for(var a in _.status)t.find("[class*=crowdin_jipt_"+_.status[a]+"]").length&&i.push("crowdin_jipt_"+_.status[a]);return t.find("[class*=crowdin_jipt_no_preview]").length&&i.push("crowdin_jipt_no_preview"),i.join(" ")}for(var n=t.data("phrases")||[],o=[],s="",r=0;r<n.length;r++){var l=_.phrases[n[r].id].data;o.push(_.phrase_classname(l)),s||(s=_.phrase_no_preview_classname(l))}for(var a in _.status){var d="crowdin_jipt_"+_.status[a];if(e.inArray(d,o)>=0)return d+s}return""+s},phrase_no_preview_classname:function(t){return _.pluralsPreview||1===t.text.length?"":" crowdin_jipt_no_preview"},phrase_classname:function(t){return t.hidden?"crowdin_jipt_hidden":"crowdin_jipt_"+this.get_phrase_status(t.status)},addPhraseToElement:function(t,e){var i=[];t.data("phrases")&&(i=t.data("phrases"));for(var a=0;a<i.length;a++)if(+i[a].id===e.id)return;i.push(e),t.data("phrases",i)},findNext:function(t,e,i){for(var a=_[t](e);;){if(!1===a)return!1;if(a.is(i))return a;a=_[t](a)}},next:function(t){var e=t.find("*:first");if(0!==e.length)return e;var i=t.next();if(0!==i.length)return i;for(var a=t.parent();;){if(a.is("html")||0===a.length)return!1;var n=a.next();if(0!==n.length)return n;a=a.parent()}},prev:function(t){var e=t.prev();if(0!==e.length){var i=e.find("*:last");return 0!==i.length?i:e}return!t.is("html")&&0!==t.length&&t.parent()},_load_phrases_delayed:function(t,i){!0!==o.preload_texts&&(e.extend(_._phrases.need_load,_.get_phrases_from_text(t)),_._phrases.callbacks.push(i),clearTimeout(_._phrases.load_timeout),_._phrases.load_timeout=setTimeout((function(){var t=_._phrases.need_load,i=_._phrases.callbacks.slice(0);for(var a in _._phrases.need_load={},_._phrases.callbacks=[],t)_._phrases.was_loaded[a]&&delete t[a];e.extend(_._phrases.was_loaded,t),e.isEmptyObject(t)||_._load_phrases(t,i)}),200))},_load_phrases:function(t,e){var i=0;if(o.edit_strings_context&&!o.preload_texts&&(i=1),!0===o.preload_texts)var a=["all"];else{var n=_.serialize_ids(t);if(!(a=_.string_chunks(n,1400,".")).length){for(var s=0;s<e.length;s++)e[s]();return void _.rebuild_panel_phrases()}}const r=`${Date.now()}-${Math.random().toString(36).slice(2,11)}`;_._phrases.strings_callbacks[r]={processed_chunks:0,callbacks:e,total_chunks:a.length};for(var l=0;l<a.length;l++){var c={msg_type:"load_phrases",identifier:r,ids:o.preload_texts?t:a[l],url:d.getFullUrl("/api/v2/jipt/project/"+p()+"/strings"),data:{languageCode:_.language.code,workflowStepId:_.workflowStep.id,editStringsContext:i,phrasesIds:a[l]}};_.send_post_message(c)}},handle_load_phrases_data:function(t){for(var i in e.extend(_.phrases,t.response.data),t.ids)void 0===_.phrases[i]?_.phrases[i]={data:{hidden:"0",id:i,status:"not_found",text:[_.not_found_warning],translation:[""]}}:(o.domain&&0==_.phrases[i].data.visibleOnStep&&(_.phrases[i].data.status="not_visible_on_step"),_.phrases[i].data.fileNotAvailableForLanguage&&(_.phrases[i].data.status="file_not_available_for_language"));var a=t.identifier,n=_._phrases.strings_callbacks[a];if(n.processed_chunks++,n.processed_chunks===n.total_chunks){for(var s=0;s<n.callbacks.length;s++)n.callbacks[s]();delete _._phrases.strings_callbacks[a],_.rebuild_panel_phrases()}},handle_make_screenshot_data:function(t){_.translationDialog.content.find("#screenshot-status").removeClass("alert-gray").addClass("alert-success").html('Screenshot was successfully uploaded.<br> Name: <i>"'+u(t.screenshot_name)+'"</i>'),setTimeout((function(){_.translationDialog.content.find("#screenshot-status").hasClass("alert-gray")||_.translationDialog.content.find("#screenshot-status").fadeOut("slow",(function(){_.translationDialog.content.find("#screenshot-status").attr("class","screenshot-status")}))}),5e3),e(_.translationDialog.content.find("#make_screenshot")).attr("disabled",!1)},update_strings_context:function(t,n){if(0!=+t&&void 0!==n&&!o.preload_texts){var s=o.edit_strings_context(n);if(i&&window.clearTimeout(i),s.length>1500)return void console.warn("Crowdin In-Context: Context cannot be updated because it is too long. String ID: "+t);if(n===s)return;if(e.inArray(t,a.updatedStrings)>0)return;a.updatedStrings.push(t);var r=a.newStrings.slice();r.push({id:t,context:s}),JSON.stringify(r).length>1500&&_.send_strings(),a.newStrings.push({id:t,context:s}),i=window.setTimeout((function(){_.send_strings()}),1e3)}},send_strings:function(){var t={msg_type:"send_strings",url:d.getFullUrl("/api/v2/jipt/project/"+p()+"/strings"),data:{origin:window.location.origin,workflowStepId:_.workflowStep.id,strings:a.newStrings}};_.send_post_message(t),a.newStrings.splice(0,a.newStrings.length)},get_phrases_from_text:function(t){for(var e={};;){var i=_.regexp.globalStartPhrase.exec(t);if(null===i)break;e[parseInt(i[1])]=!0}return e},serialize_ids:function(t){var e=[],i=[],a=0;for(var n in t)n-a!=1&&0!==i.length&&(e.push(i),i=[]),i.push(n),a=n;0!==i.length&&e.push(i);for(var o=[],s=0;s<e.length;s++){var r=e[s][0];r===(a=e[s][e[s].length-1])?o.push(r):o.push(r+"-"+a)}return o.join(".")},string_chunks:function(t,e,i){for(var a=[];;){var n=t.indexOf(i,e);if(-1===n){0!==t.length&&a.push(t);break}a.push(t.slice(0,n)),t=t.slice(n+1)}return a},split:function(t,e){for(var i=[],a=e.length;;){var n=t.toLowerCase().indexOf(e);if(-1===n){i.push(t);break}i.push(t.substr(0,n)),t=t.substr(n+a)}return i},get_workflow_proofread_step_id:function(){var t=this.user.workflowStepId;return 1==t||-1==e.inArray(t,this.workflowStepIds)?this.workflowStepIds[this.workflowStepIds.length-1]:t},get_phrase_status:function(t){if("string"==typeof t)return t;var e=this.get_workflow_proofread_step_id(),i=this.status.untranslated;return t.translated&&(i=this.status.translated),o.domain?(t.approved&&(i=this.status.approved),t.partially_approved&&(i=this.status.partially_approved)):(t.approved[e]&&(i=this.status.approved),t.partially_approved[e]&&(i=this.status.partially_approved)),t.partially_translated&&(i=this.status.partially_translated),i},get_in_context_config_url:function(t){return _.projectURL?_.projectURL+"/tools/in-context":o.domain?d.getEntryPoint()+"/u/projects/"+t.projectId+"/tools/in-context":d.getEntryPoint()+"/project/"+t.projectId+"/tools/in-context"}};window.location.search.match("\\bdisable_jipt\\b")||_.init(),window.jipt={target_language:r("language_code"),set_draft_suggestion:function(t,e){_.set_draft_suggestion(t,e)},save_suggestions:function(t,e,i){_.save_suggestions(t,e,i)}}}();var sanitizer=new function(){this.uri_protocol_named_ref_map={Tab:"\t",NewLine:"\n"},this.uri_blacklist_protocols={javascript:1,data:1,vbscript:1,mhtml:1},this.uri_protocol_colon=/(?::|&#[xX]0*3[aA];?|&#0*58;?|&colon;)/,this.uri_protocols_whitespaces=/\\n|(?:^[\x00-\x20]+|[\t\n\r\x00]+)/g,this.special_attr_value_unquoted_chars=/(?:^(?:["'`]|\x00+$|$)|[\x09-\x0D >])/g,this.sensitive_html_entities=/&(?:#([xX][0-9A-Fa-f]+|\d+);?|(Tab|NewLine|colon|semi|lpar|rpar|apos|sol|comma|excl|ast|midast|ensp|emsp|thinsp);|(nbsp|amp|AMP|lt|LT|gt|GT|quot|QUOT);?)/g,this.null_value=/\x00/g,this.url=function(t){return this.uri_blacklist_protocols[this._getProtocol(this._convertSpecialChars(t))]?"#":t},this.attributes=function(t){var e,i,a,n,o=[];for(e=/\s+on\w*\s*=\s*("([^"]*")|'[^']*'|([^'">\s]*))/gi;null!==(i=e.exec(t));)t=t.replace(i[0],"");for(e=/\bhref\s*=[^"']*(?:"([^"]*)"|'([^']*)')/gi;null!==(i=e.exec(t));)o.push(i[1]);for(n in o)a=this.url(o[n]),t=t.replace(o[n],a);return t},this.tags=function(t,e){var i=this,a=!1;return e.map((function(e){var n=new RegExp("<"+e+"\\b[^<]*(?:(?!<\\/"+e+">)<[^<]*)*((<\\/"+e+">)|>)","ig"),o=t.match(n);if(o)if(a=!0,1===o.length){var s=n.exec(t);t=i._replaceTags(t,s)}else t=i._replaceTags(t,o)})),a&&(t=i.tags(t,e)),t},this._replaceTags=function(t,e){for(var i=0,a=e.length;i<a;i++)t=t.replace(e[i],"");return t},this._getRawProtocol=function(t){return 2===(t=t.split(this.uri_protocol_colon,2)).length&&t[0]?t[0]:null},this._getProtocol=function(t){t=this._getRawProtocol(t.replace(this.null_value,""));var e=this;return t?this._htmlDecode(t,this.uri_protocol_named_ref_map,this.sensitive_html_entities,(function(){return this.replace(e.uri_protocols_whitespaces,"").toLowerCase()})):null},this._getCharacter=function(t){return!isFinite(t)||t<=0||t>1114111||11===t||t>=1&&t<=8||t>=14&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||65535==(65535&t)||65534==(65535&t)?"":this._fromCodePoint(t)},this._fromCodePoint=String.fromCodePoint||function(t){return 0===arguments.length?"":t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),t%1024+56320))},this._convertSpecialChars=function(t){return this._stringify(t,String.prototype.replace,this.special_attr_value_unquoted_chars,(function(t){return"\t"===t?"&#9;":"\n"===t?"&#10;":"\v"===t?"&#11;":"\f"===t?"&#12;":"\r"===t?"&#13;":" "===t?"&#32;":">"===t?"&gt;":'"'===t?"&quot;":"'"===t?"&#39;":"`"===t?"&#96;":""}))},this._stringify=function(t,e){return void 0===t?"undefined":null===t?"null":e.apply(t.toString(),[].splice.call(arguments,2))},this._htmlDecode=function(t,e,i,a){var n,o=[].splice.call(arguments,4),s=this;return this._stringify(t,(function(){return n=this.replace(this.null_value,"").replace(i,(function(t,i,a,n){return i?(i=Number(i[0]<="9"?i:"0"+i))>=55296&&i<=57343||13===i?"":s._getCharacter(i):e[a||n]||t})),a?a.apply(n,o):n}))}};
